
> test
> NODE_OPTIONS="--expose-gc" vitest run


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/home/pat/Dokumente/GitHub/cachy-app[39m

[90mstderr[2m | src/tests/security/storage_hardening.test.ts
[22m[39m[Settings] Store ready. Provider: bitunix

[90mstderr[2m | src/tests/security/storage_hardening.test.ts[2m > [22m[2mStorage Hardening Security[2m > [22m[2mshould restore sensitive keys using Device Key on load
[22m[39m[Settings] Store ready. Provider: bitunix

 [31mâ¯[39m src/tests/security/storage_hardening.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 107[2mms[22m[39m
[31m     [31mÃ—[31m should restore sensitive keys using Device Key on load[39m[32m 94[2mms[22m[39m
 [31mâ¯[39m tests/e2e/hardening/trade_flow.spec.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m tests/e2e/offline-banner.spec.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m tests/e2e/hardening/wasm-resilience.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m tests/e2e/wasm_features.spec.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m tests/tradeflow.spec.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m tests/e2e/hardening/smoke_test.spec.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mhandles 1.000 candles without timeout
[22m[39mðŸ‹ï¸   1000 candles: 124.6ms

[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mhandles 5.000 candles without timeout
[22m[39mðŸ‹ï¸   5000 candles: 199.7ms

[90mstdout[2m | src/tests/performance/engine_benchmark.test.ts[2m > [22m[2mEngine Performance Benchmarks[2m > [22m[2mcalculates 100 candles within budget
[22m[39mðŸ“Š    100 candles: median=8.8ms  throughput=11.400 candles/sec  runs=[18.2, 7.8, 13.6, 8.8, 6.2]

[90mstdout[2m | src/tests/performance/engine_benchmark.test.ts[2m > [22m[2mEngine Performance Benchmarks[2m > [22m[2mcalculates 1000 candles within budget
[22m[39mðŸ“Š   1000 candles: median=27.4ms  throughput=36.544 candles/sec  runs=[27.4, 33.1, 23.3, 23.0, 40.5]

[90mstdout[2m | src/tests/performance/memory_profiling.test.ts[2m > [22m[2mMemory Profiling[2m > [22m[2mdoes not leak memory over repeated calculations
[22m[39mðŸ§  Memory: before=37.7MB, after=37.9MB, growth=0.22MB over 50 iterations

[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mhandles 10.000 candles without timeout
[22m[39mðŸ‹ï¸  10000 candles: 243.1ms

[90mstdout[2m | src/tests/performance/engine_benchmark.test.ts[2m > [22m[2mEngine Performance Benchmarks[2m > [22m[2mcalculates 5000 candles within budget
[22m[39mðŸ“Š   5000 candles: median=72.7ms  throughput=68.744 candles/sec  runs=[88.4, 78.0, 72.7, 66.6, 67.3]

[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mhandles 25.000 candles without timeout
[22m[39mðŸ‹ï¸  25000 candles: 471.8ms

[90mstdout[2m | src/tests/performance/engine_benchmark.test.ts[2m > [22m[2mEngine Performance Benchmarks[2m > [22m[2mcalculates 10000 candles within budget
[22m[39mðŸ“Š  10000 candles: median=168.8ms  throughput=59.247 candles/sec  runs=[243.1, 168.8, 114.1, 196.6, 161.2]

[90mstdout[2m | src/tests/performance/memory_profiling.test.ts[2m > [22m[2mMemory Profiling[2m > [22m[2mbuffer pool releases buffers correctly
[22m[39mðŸ”„ Buffer pool test: growth=0.02MB over 100 iterations

 [32mâœ“[39m src/tests/performance/memory_profiling.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 4680[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not leak memory over repeated calculations [33m 2870[2mms[22m[39m
     [33m[2mâœ“[22m[39m buffer pool releases buffers correctly [33m 1794[2mms[22m[39m
[90mstdout[2m | src/tests/performance/engine_benchmark.test.ts[2m > [22m[2mEngine Performance Benchmarks[2m > [22m[2mthroughput scales linearly (no quadratic blowup)
[22m[39mðŸ“ˆ Scaling: 1k=17.3ms, 5k=77.9ms, ratio=4.50x (expect <8x)

 [32mâœ“[39m src/tests/performance/engine_benchmark.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 2602[2mms[22m[39m
     [33m[2mâœ“[22m[39m calculates 5000 candles within budget [33m 595[2mms[22m[39m
     [33m[2mâœ“[22m[39m calculates 10000 candles within budget [33m 1251[2mms[22m[39m
     [33m[2mâœ“[22m[39m throughput scales linearly (no quadratic blowup) [33m 321[2mms[22m[39m
[90mstderr[2m | src/tests/performance/startup_benchmark.test.ts
[22m[39m[Settings] Store ready. Provider: bitunix

[90mstderr[2m | src/tests/performance/startup_benchmark.test.ts
[22m[39m[Settings] Save failed: ReferenceError: indexedDB is not defined
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:279:23
    at new Promise (<anonymous>)
    at CryptoServiceImpl.loadKeyFromDB [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:278:12[90m)[39m
    at CryptoServiceImpl.getOrGenerateDeviceKey [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:245:26[90m)[39m
    at SettingsManager.getDeviceKey [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:951:37[90m)[39m
    at SettingsManager.save [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:1384:41[90m)[39m
    at Timeout._onTimeout [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:894:20[90m)[39m
[90m    at listOnTimeout (node:internal/timers:605:17)[39m
[90m    at processTimers (node:internal/timers:541:7)[39m

[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mhandles 50.000 candles without timeout
[22m[39mðŸ‹ï¸  50000 candles: 768.2ms

[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mconcurrent calculations produce correct independent results
[22m[39mâœ… Concurrent calculations are deterministic and independent

[90mstderr[2m | src/services/backupService.test.ts[2m > [22m[2mbackupService[2m > [22m[2mshould fail with incorrect password
[22m[39mDecryption failed DOMException [OperationError]: The operation failed for an operation-specific reason
[90m    at AESCipherJob.onDone (node:internal/crypto/util:646:19)[39m {
  [cause]: [Error: Cipher job failed]
}

[90mstderr[2m | src/services/backupService.test.ts[2m > [22m[2mbackupService[2m > [22m[2mshould throw error when backing up corrupt localStorage data
[22m[39mBackup Logic: Detected corrupt JSON for key cryptoCalculatorSettings. Skipping.

[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mno shared-state corruption between sequential runs
[22m[39mâœ… No shared-state corruption between sequential runs

 [32mâœ“[39m src/tests/performance/load_testing.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 4640[2mms[22m[39m
     [33m[2mâœ“[22m[39m handles 5.000 candles without timeout [33m 303[2mms[22m[39m
     [33m[2mâœ“[22m[39m handles 10.000 candles without timeout [33m 441[2mms[22m[39m
     [33m[2mâœ“[22m[39m handles 25.000 candles without timeout [33m 985[2mms[22m[39m
     [33m[2mâœ“[22m[39m handles 50.000 candles without timeout [33m 1877[2mms[22m[39m
     [33m[2mâœ“[22m[39m concurrent calculations produce correct independent results [33m 474[2mms[22m[39m
     [33m[2mâœ“[22m[39m no shared-state corruption between sequential runs [33m 348[2mms[22m[39m
[90mstderr[2m | src/tests/performance/startup_benchmark.test.ts
[22m[39m[MockLog:Warn] general: IndexedDB not supported or SSR environment

 [32mâœ“[39m src/services/apiService.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 1608[2mms[22m[39m
     [33m[2mâœ“[22m[39m should handle AbortError correctly [33m 1578[2mms[22m[39m
 [32mâœ“[39m src/services/backupService.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 3295[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create a valid V4 backup [33m 596[2mms[22m[39m
     [33m[2mâœ“[22m[39m should restore a V4 backup correctly [33m 1163[2mms[22m[39m
     [33m[2mâœ“[22m[39m should fail with incorrect password [33m 1006[2mms[22m[39m
     [33m[2mâœ“[22m[39m should throw error when backing up corrupt localStorage data [33m 507[2mms[22m[39m
[90mstdout[2m | src/tests/performance/startup_benchmark.test.ts[2m > [22m[2mApp Startup Performance Benchmark[2m > [22m[2mmeasures startup time and request count
[22m[39m--- STARTUP BENCHMARK ---
[handleFetchPrice] Fetching price for BTCUSDT via bitunix
[handleFetchPrice] Fetched ticker: {
  provider: [32m'bitunix'[39m,
  symbol: [32m'BTCUSDT'[39m,
  lastPrice: 95000,
  priceChangePercent: 1.06,
  highPrice: 96000,
  lowPrice: 93000,
  volume: 1000,
  quoteVolume: 95000000
}
[handleFetchPrice] Updated tradeState entryPrice to 95000
[Perf] Time to First Price: 99.99ms

[90mstderr[2m | src/tests/performance/startup_benchmark.test.ts[2m > [22m[2mApp Startup Performance Benchmark[2m > [22m[2mmeasures startup time and request count
[22m[39mMatomo Tag Manager not available. Skipping event: {
  event: [32m'customEvent'[39m,
  [32m'custom-event-category'[39m: [32m'Onboarding'[39m,
  [32m'custom-event-action'[39m: [32m'FirstInteraction'[39m,
  [32m'custom-event-name'[39m: [32m'FirstCalculation'[39m
}
[MockLog:Error] technicals: Analyst: ERROR for ETHUSDT: MIN_DATA_REQUIRED

[90mstderr[2m | src/tests/performance/startup_benchmark.test.ts[2m > [22m[2mApp Startup Performance Benchmark[2m > [22m[2mmeasures startup time and request count
[22m[39m[Settings] Save failed: ReferenceError: indexedDB is not defined
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:279:23
    at new Promise (<anonymous>)
    at CryptoServiceImpl.loadKeyFromDB [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:278:12[90m)[39m
    at CryptoServiceImpl.getOrGenerateDeviceKey [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:245:26[90m)[39m
    at SettingsManager.getDeviceKey [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:951:37[90m)[39m
    at SettingsManager.save [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:1384:41[90m)[39m
    at Timeout._onTimeout [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:894:20[90m)[39m
[90m    at listOnTimeout (node:internal/timers:605:17)[39m
[90m    at processTimers (node:internal/timers:541:7)[39m

[90mstdout[2m | src/benchmarks/marketWatcher_backfill.test.ts[2m > [22m[2mMarketWatcher Backfill Performance[2m > [22m[2mmeasures sequential backfill
[22m[39mExecution Time: 1468ms

 [32mâœ“[39m src/benchmarks/marketWatcher_backfill.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 1504[2mms[22m[39m
     [33m[2mâœ“[22m[39m measures sequential backfill [33m 1495[2mms[22m[39m
[90mstderr[2m | src/stores/marketStore_limits.test.ts[2m > [22m[2mMarketStore Limits
[22m[39m[Settings] Store ready. Provider: bitunix

[90mstderr[2m | src/stores/marketStore_limits.test.ts[2m > [22m[2mMarketStore Limits[2m > [22m[2mshould enforce market data cache limit based on settings
[22m[39m[Settings] Save failed: ReferenceError: indexedDB is not defined
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:279:23
    at new Promise (<anonymous>)
    at CryptoServiceImpl.loadKeyFromDB [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:278:12[90m)[39m
    at CryptoServiceImpl.getOrGenerateDeviceKey [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:245:26[90m)[39m
    at SettingsManager.getDeviceKey [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:951:37[90m)[39m
    at SettingsManager.save [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:1384:41[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:894:20
    at callTimer [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/chunks/vi.2VT5v0um.js:2111:25[90m)[39m
    at doTickInner [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/chunks/vi.2VT5v0um.js:2714:30[90m)[39m
    at Immediate.nextPromiseTick [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/chunks/vi.2VT5v0um.js:2775:26[90m)[39m

[90mstderr[2m | src/stores/marketStore_limits.test.ts[2m > [22m[2mMarketStore Limits[2m > [22m[2mshould respect updated cache limit
[22m[39m[Settings] Save failed: ReferenceError: indexedDB is not defined
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:279:23
    at new Promise (<anonymous>)
    at CryptoServiceImpl.loadKeyFromDB [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:278:12[90m)[39m
    at CryptoServiceImpl.getOrGenerateDeviceKey [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:245:26[90m)[39m
    at SettingsManager.getDeviceKey [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:951:37[90m)[39m
    at SettingsManager.save [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:1384:41[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:894:20
    at callTimer [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/chunks/vi.2VT5v0um.js:2111:25[90m)[39m
    at doTickInner [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/chunks/vi.2VT5v0um.js:2714:30[90m)[39m
    at Immediate.nextPromiseTick [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/chunks/vi.2VT5v0um.js:2775:26[90m)[39m

 [32mâœ“[39m src/stores/marketStore_limits.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 1218[2mms[22m[39m
[90mstderr[2m | src/tests/performance/startup_benchmark.test.ts[2m > [22m[2mApp Startup Performance Benchmark[2m > [22m[2mmeasures startup time and request count
[22m[39m[MockLog:Error] technicals: Analyst: ERROR for SOLUSDT: MIN_DATA_REQUIRED

[90mstderr[2m | src/services/bitunixWs.test.ts[2m > [22m[2mBitunixWS Fast Path Fallback[2m > [22m[2mshould FALLBACK to standard validation if Fast Path throws (using Ticker channel)
[22m[39m[BitunixWS] FastPath error (ticker): Error: Fast Path Crash
    at Object.<anonymous> [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/bitunixWs.test.ts:133:19[90m)[39m
    at Object.Mock [as normalizeTicker] [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/spy[24m/dist/index.js:285:34[90m)[39m
    at BitunixWebSocketService.handleMessage [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/bitunixWs.ts:945:51[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/bitunixWs.test.ts:145:19
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

 [32mâœ“[39m src/services/bitunixWs.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 177[2mms[22m[39m
 [32mâœ“[39m src/services/storageService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 425[2mms[22m[39m
 [32mâœ“[39m src/tests/unit/edge_cases.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 257[2mms[22m[39m
[90mstderr[2m | src/tests/performance/startup_benchmark.test.ts[2m > [22m[2mApp Startup Performance Benchmark[2m > [22m[2mmeasures startup time and request count
[22m[39m[MockLog:Error] technicals: Analyst: ERROR for LINKUSDT: MIN_DATA_REQUIRED

[90mstdout[2m | src/services/incrementalCache.test.ts[2m > [22m[2mIncrementalCache[2m > [22m[2mLRU Eviction[2m > [22m[2mshould evict least recently used entry when over max size
[22m[39m[IncrementalCache] Evicted LRU entry: SYM2:1m

[90mstdout[2m | src/services/incrementalCache.test.ts[2m > [22m[2mIncrementalCache[2m > [22m[2mTTL Cleanup[2m > [22m[2mshould remove expired entries
[22m[39m[IncrementalCache] Cleaned up 1 stale entries

 [32mâœ“[39m src/services/incrementalCache.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 229[2mms[22m[39m
[90mstderr[2m | src/tests/performance/startup_benchmark.test.ts[2m > [22m[2mApp Startup Performance Benchmark[2m > [22m[2mmeasures startup time and request count
[22m[39m[Perf] Analysis timed out (Check mocked klines or settings)

[90mstdout[2m | src/tests/performance/startup_benchmark.test.ts[2m > [22m[2mApp Startup Performance Benchmark[2m > [22m[2mmeasures startup time and request count
[22m[39m[Perf] Total API Calls: 22
[Perf] Ticker Calls: 9
[Perf] Kline Calls: 13

 [32mâœ“[39m src/tests/performance/startup_benchmark.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 5314[2mms[22m[39m
     [33m[2mâœ“[22m[39m measures startup time and request count [33m 5305[2mms[22m[39m
 [32mâœ“[39m src/services/logger.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 55[2mms[22m[39m
 [32mâœ“[39m src/services/app.test.ts [2m([22m[2m17 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[32m 173[2mms[22m[39m
 [32mâœ“[39m src/routes/api/chat-v2/server.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 147[2mms[22m[39m
 [32mâœ“[39m tests/unit/timeUtils.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 133[2mms[22m[39m
 [32mâœ“[39m src/stores/market.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 117[2mms[22m[39m
 [32mâœ“[39m src/lib/calculators/rolling_stats.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 107[2mms[22m[39m
 [32mâœ“[39m src/utils/inputUtils.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 161[2mms[22m[39m
[90mstderr[2m | src/stores/settings.security.test.ts
[22m[39mWarning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype.

[90mstderr[2m | src/stores/settings.security.test.ts
[22m[39m[Settings] Store ready. Provider: bitunix

[90mstderr[2m | src/stores/settings.security.test.ts[2m > [22m[2mSettingsManager Security[2m > [22m[2mshould initially be unencrypted and unlocked (default)
[22m[39m[Settings] Store ready. Provider: bitunix

[90mstderr[2m | src/stores/settings.security.test.ts[2m > [22m[2mSettingsManager Security[2m > [22m[2mshould encrypt keys when setMasterPassword is called
[22m[39m[Settings] Store ready. Provider: bitunix

[90mstderr[2m | src/stores/settings.security.test.ts[2m > [22m[2mSettingsManager Security[2m > [22m[2mshould NOT serialize plain keys when encrypted
[22m[39m[Settings] Store ready. Provider: bitunix

[90mstderr[2m | src/stores/settings.security.test.ts[2m > [22m[2mSettingsManager Security[2m > [22m[2mshould lock the session and clear memory
[22m[39m[Settings] Store ready. Provider: bitunix

[90mstderr[2m | src/stores/settings.security.test.ts[2m > [22m[2mSettingsManager Security[2m > [22m[2mshould unlock and restore keys
[22m[39m[Settings] Store ready. Provider: bitunix

 [32mâœ“[39m src/stores/settings.security.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 105[2mms[22m[39m
 [32mâœ“[39m src/utils/mfi_correctness.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 131[2mms[22m[39m
[90mstdout[2m | tests/benchmarks/syncService_perf.test.ts[2m > [22m[2mfetchBatchedKlines Performance[2m > [22m[2mmeasures execution time for multiple scattered trades
[22m[39mExecution time for 20 symbols: 59.42ms

 [32mâœ“[39m tests/benchmarks/syncService_perf.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 88[2mms[22m[39m
 [32mâœ“[39m src/services/technicalsService.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 145[2mms[22m[39m
 [32mâœ“[39m src/utils/utils_timestamp.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 49[2mms[22m[39m
 [32mâœ“[39m src/services/workerPool.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 126[2mms[22m[39m
 [32mâœ“[39m src/services/omsService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 112[2mms[22m[39m
 [32mâœ“[39m src/lib/calculator_charts.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 53[2mms[22m[39m
 [32mâœ“[39m src/routes/api/external/news/news_security.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 78[2mms[22m[39m
 [32mâœ“[39m src/services/bitunixWs_leak.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 134[2mms[22m[39m
 [32mâœ“[39m src/workers/technicals.worker.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 145[2mms[22m[39m
[90mstdout[2m | src/utils/storageUtils.test.ts[2m > [22m[2mstorageUtils[2m > [22m[2mshould correct drift via async verification on startup
[22m[39m[StorageUtils] Correcting usage cache drift: 4 -> 8

 [32mâœ“[39m src/services/chartPatterns.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 167[2mms[22m[39m
 [32mâœ“[39m src/utils/storageUtils.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 184[2mms[22m[39m
 [32mâœ“[39m src/routes/api/external/cmc/cmc_auth.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 213[2mms[22m[39m
 [32mâœ“[39m src/utils/retryPolicy.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 143[2mms[22m[39m
 [32mâœ“[39m src/routes/api/account/account.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 134[2mms[22m[39m
 [32mâœ“[39m src/lib/calculator.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 56[2mms[22m[39m
 [32mâœ“[39m src/services/apiService_rateLimit.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 93[2mms[22m[39m
 [32mâœ“[39m src/lib/server/sanitizer.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 79[2mms[22m[39m
 [32mâœ“[39m tests/repro_calculator.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 172[2mms[22m[39m
 [32mâœ“[39m src/routes/api/sync/orders/security.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 42[2mms[22m[39m
[90mstderr[2m | src/routes/api/external/news/news_service_memory.test.ts[2m > [22m[2mNews Service Cache Memory[2m > [22m[2mshould limit cache size to 50 items (optimization)
[22m[39m[NewsProxy] NewsAPI Schema Validation Warning: ZodError: [
  {
    "expected": "string",
    "code": "invalid_type",
    "path": [
      "status"
    ],
    "message": "Invalid input: expected string, received undefined"
  }
]
    at new ZodError [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mzod[24m/v4/core/core.js:39:39[90m)[39m
    at Module.<anonymous> [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mzod[24m/v4/core/parse.js:40:20[90m)[39m
    at _.inst.safeParse [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mzod[24m/v4/classic/schemas.js:40:46[90m)[39m
    at executeRequest [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/external/news/+server.ts:148:50[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:104:5)[39m
    at POST [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/external/news/+server.ts:165:20[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/external/news/news_service_memory.test.ts:59:9
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | src/routes/api/external/news/news_service_memory.test.ts[2m > [22m[2mNews Service Cache Memory[2m > [22m[2mshould limit cache size to 50 items (optimization)
[22m[39m[NewsProxy] Error processing request for undefined: Upstream response failed schema validation

 [32mâœ“[39m src/routes/api/external/news/news_service_memory.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 97[2mms[22m[39m
 [32mâœ“[39m src/tests/flash_close_race_repro.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 29[2mms[22m[39m
 [32mâœ“[39m src/services/newsService_limit.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 69[2mms[22m[39m
 [32mâœ“[39m src/tests/security/log_stream_auth.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 71[2mms[22m[39m
 [32mâœ“[39m src/utils/indicators.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 50[2mms[22m[39m
 [32mâœ“[39m src/lib/calculators/new_charts.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 58[2mms[22m[39m
 [32mâœ“[39m src/stores/analysisStore.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 83[2mms[22m[39m
[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould initialize correctly
[22m[39m[WebGPU] Initialized pipelines

[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould handle Float32Array params
[22m[39m[WebGPU] Initialized pipelines

[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould handle ArrayBuffer params (mixed types)
[22m[39m[WebGPU] Initialized pipelines

[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould handle Uint32Array params
[22m[39m[WebGPU] Initialized pipelines

[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould handle number[] params (default to Uint32Array)
[22m[39m[WebGPU] Initialized pipelines

[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould handle multiple outputs
[22m[39m[WebGPU] Initialized pipelines

 [32mâœ“[39m tests/unit/webGpuCalculator.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 73[2mms[22m[39m
 [32mâœ“[39m src/utils/utils.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 64[2mms[22m[39m
 [32mâœ“[39m src/routes/api/sync/sync_security.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 75[2mms[22m[39m
 [32mâœ“[39m src/utils/networkMonitor.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 34[2mms[22m[39m
[90mstderr[2m | src/stores/marketStore.test.ts
[22m[39m[Settings] Store ready. Provider: bitunix

 [32mâœ“[39m src/stores/marketStore.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 66[2mms[22m[39m
 [32mâœ“[39m tests/verify_tpsl_validation.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 72[2mms[22m[39m
 [32mâœ“[39m src/routes/api/stream-logs/server.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 110[2mms[22m[39m
 [32mâœ“[39m src/services/marketWatcher.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 41[2mms[22m[39m
 [32mâœ“[39m tests/unit/circularBuffer.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 37[2mms[22m[39m
 [32mâœ“[39m src/tests/hardening/float_safety.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 51[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_safety.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 47[2mms[22m[39m
[90mstdout[2m | src/routes/api/klines/klines.test.ts[2m > [22m[2mGET /api/klines[2m > [22m[2mshould return klines with string properties from Bitunix
[22m[39m[Bitunix API] BTCUSDT:1d requested 50 with end undefined. Got 2. FirstTS: 1600000000, LastTS: 1600000060

[90mstdout[2m | src/routes/api/klines/klines.test.ts[2m > [22m[2mGET /api/klines[2m > [22m[2mshould handle numeric inputs from Bitunix correctly
[22m[39m[Bitunix API] BTCUSDT:1d requested 50 with end undefined. Got 1. FirstTS: 1600000000, LastTS: 1600000000

[90mstdout[2m | src/routes/api/klines/klines.test.ts[2m > [22m[2mGET /api/klines[2m > [22m[2mshould preserve small numbers without scientific notation if string provided
[22m[39m[Bitunix API] PEPEUSDT:1d requested 50 with end undefined. Got 1. FirstTS: 1600000000, LastTS: 1600000000

 [32mâœ“[39m src/routes/api/klines/klines.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 68[2mms[22m[39m
[90mstderr[2m | src/stores/account.test.ts[2m > [22m[2mAccountManager[2m > [22m[2mshould trigger sync callback on partial update for unknown position (Race Condition Fix)
[22m[39mBitunix WS: Ignored position update due to missing side. Requesting full sync. {
  positionId: [32m'999'[39m,
  symbol: [32m'ETHUSDT'[39m,
  qty: [32m'10.0'[39m,
  unrealizedPNL: [32m'50'[39m
}

 [32mâœ“[39m src/stores/account.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 94[2mms[22m[39m
 [32mâœ“[39m src/utils/safeJson.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_hardening.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 154[2mms[22m[39m
 [32mâœ“[39m src/utils/bufferPool.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 58[2mms[22m[39m
 [32mâœ“[39m src/services/mdaService.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m src/routes/api/sync/positions-history/positions_history_security.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 51[2mms[22m[39m
[90mstderr[2m | src/services/marketWatcher_hardening.test.ts
[22m[39m[GENERAL] IndexedDB not supported or SSR environment 

 [32mâœ“[39m src/utils/statefulTechnicalsCalculator.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 63[2mms[22m[39m
 [32mâœ“[39m src/services/marketWatcher_hardening.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 75[2mms[22m[39m
 [32mâœ“[39m src/tests/security/cmc_proxy.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 220[2mms[22m[39m
[90mstderr[2m | src/routes/api/sentiment/sentiment.test.ts[2m > [22m[2mPOST /api/sentiment error handling[2m > [22m[2mshould return 500 and error message when a standard Error is thrown
[22m[39mSentiment API Error: Error: Test Error
    at default.<instance_members_initializer> [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/sentiment/sentiment.test.ts:30:55[90m)[39m
    at new default [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/sentiment/sentiment.test.ts:27:18[90m)[39m
    at Module.POST [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/sentiment/+server.ts:37:28[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:104:5)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/sentiment/sentiment.test.ts:57:26
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20

 [32mâœ“[39m src/routes/api/sentiment/sentiment.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 90[2mms[22m[39m
 [32mâœ“[39m src/lib/server/auth.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 58[2mms[22m[39m
 [32mâœ“[39m src/tests/flash-close.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 53[2mms[22m[39m
 [32mâœ“[39m src/services/marketWatcher_perf.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 46[2mms[22m[39m
 [32mâœ“[39m src/tests/provider-switch.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 31[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_flashClose_hardening.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 108[2mms[22m[39m
 [32mâœ“[39m src/services/julesService.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 51[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_race.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 39[2mms[22m[39m
 [32mâœ“[39m src/services/mappers.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 40[2mms[22m[39m
 [32mâœ“[39m src/services/apiService.repro.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 63[2mms[22m[39m
 [32mâœ“[39m src/stores/tradeStore.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 162[2mms[22m[39m
 [32mâœ“[39m src/tests/security/headers.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 371[2mms[22m[39m
     [33m[2mâœ“[22m[39m should set security headers [33m 355[2mms[22m[39m
 [32mâœ“[39m src/services/bitunixWs_fastpath.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m src/utils/technicalsCalculator.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 42[2mms[22m[39m
 [32mâœ“[39m src/stores/chat.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 61[2mms[22m[39m
 [32mâœ“[39m src/services/marketAnalyst.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 52[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_serialization.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m src/utils/technicalsPresenter.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32mâœ“[39m src/config/rssPresets.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 33[2mms[22m[39m
[90mstdout[2m | src/utils/tests/precision_loss.test.ts[2m > [22m[2mCritical: JSON Precision Loss & Hardening[2m > [22m[2mverifies that safeJsonParse preserves large integers as strings
[22m[39m[Safe Parse] Raw ID:    1234567890123456789
[Safe Parse] Parsed ID: 1234567890123456789 (Type: string)

 [32mâœ“[39m src/utils/tests/precision_loss.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mâœ“[39m src/services/csvService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 82[2mms[22m[39m
 [32mâœ“[39m src/utils/slidingWindow.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 38[2mms[22m[39m
 [32mâœ“[39m src/lib/server/logger.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 46[2mms[22m[39m
[90mstdout[2m | src/tests/hardening/server_precision_repro.test.ts[2m > [22m[2mServer-Side Precision Loss Reproduction[2m > [22m[2mshould demonstrate that native JSON.parse corrupts 19-digit integers
[22m[39m[Repro] Native Parse: 1234567890123456789 -> 1234567890123456800

[90mstdout[2m | src/tests/hardening/server_precision_repro.test.ts[2m > [22m[2mServer-Side Precision Loss Reproduction[2m > [22m[2mshould demonstrate that safeJsonParse preserves 19-digit integers as strings
[22m[39m[Repro] Safe Parse:   1234567890123456789 -> 1234567890123456789

 [32mâœ“[39m src/tests/hardening/server_precision_repro.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32mâœ“[39m src/tests/precision.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32mâœ“[39m src/tests/decimal-enforcement.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32mâœ“[39m src/services/hotkeyService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m src/utils/safeJson_hardening.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m src/services/marketWatcher_fillGaps.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 27[2mms[22m[39m
 [32mâœ“[39m src/services/apiService_recursion.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 42[2mms[22m[39m
 [32mâœ“[39m src/services/smc/smcService.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 37[2mms[22m[39m
 [32mâœ“[39m tests/unit/fastConversion.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m src/utils/incremental_indicators.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m src/services/patternDetection.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 24[2mms[22m[39m
 [32mâœ“[39m tests/unit/logger_security.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 44[2mms[22m[39m
 [32mâœ“[39m src/utils/fastConversion.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 54[2mms[22m[39m
 [32mâœ“[39m src/lib/calculators/getQualityData.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 29[2mms[22m[39m
 [32mâœ“[39m src/tests/tradeService_race.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32mâœ“[39m src/utils/safeJson_precision.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 34[2mms[22m[39m
 [32mâœ“[39m src/lib/calculators/stats.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 46[2mms[22m[39m
[90mstdout[2m | src/services/reproduction_ghost_order.test.ts[2m > [22m[2mGhost Order Reproduction[2m > [22m[2mshould cleanup ghost orders
[22m[39mGhost Order Successfully Removed

 [32mâœ“[39m src/services/reproduction_ghost_order.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 30[2mms[22m[39m
 [32mâœ“[39m src/services/csvService_hardening.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 52[2mms[22m[39m
 [32mâœ“[39m src/services/cloudService.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m src/tests/safeJson.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32mâœ“[39m src/utils/safeJson_integers.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 28[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_flashClose.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m src/utils/errorUtils.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32mâœ“[39m src/tests/unit/indicators_cci.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mâœ“[39m src/types/apiSchemas.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32mâœ“[39m src/lib/calculator_duration.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32mâœ“[39m src/services/serializationService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m src/utils/stochRsi_correctness.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m tests/integration/wasm_parity.test.ts [2m([22m[2m2 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[32m 16[2mms[22m[39m
 [32mâœ“[39m src/tests/unit/indicators_mfi.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m src/utils/timeUtils.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 24[2mms[22m[39m
 [32mâœ“[39m tests/auth_fail_closed.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 29[2mms[22m[39m
[90mstdout[2m | src/utils/indicators_precision.test.ts[2m > [22m[2mindicators precision[2m > [22m[2mbb (Bollinger Bands)[2m > [22m[2mshould handle high-value low-volatility assets without catastrophic cancellation
[22m[39mCalculated StdDev: [33m0.049999999995634425[39m

 [32mâœ“[39m src/utils/indicators_precision.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 58[2mms[22m[39m
 [32mâœ“[39m src/utils/divergenceScanner.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 51[2mms[22m[39m
 [32mâœ“[39m src/tests/unit/indicators_ao.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 37[2mms[22m[39m
 [32mâœ“[39m src/services/bitunixWs.leak.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 55[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService.repro.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 20[2mms[22m[39m
 [2m[90mâ†“[39m[22m src/services/cryptoService.test.ts [2m([22m[2m3 tests[22m[2m | [22m[33m3 skipped[39m[2m)[22m
 [32mâœ“[39m src/services/bitunixWs_hardening.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [2m[90mâ†“[39m[22m src/tests/performance/market_watcher_concurrency.test.ts [2m([22m[2m1 test[22m[2m | [22m[33m1 skipped[39m[2m)[22m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Suites 6 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m tests/tradeflow.spec.ts[2m [ tests/tradeflow.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/tradeflow.spec.ts:[2m20:6[22m[39m
    [90m 18| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m 19| [39m
    [90m 20| [39mtest[33m.[39m[34mdescribe[39m([32m'TradeFlow Visual Verification'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 21| [39m    test[33m.[39m[34mbeforeEach[39m([35masync[39m ({ page }) [33m=>[39m {
    [90m 22| [39m        [35mawait[39m page[33m.[39m[34mgoto[39m([32m'/'[39m)[33m;[39m 

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/7]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/e2e/offline-banner.spec.ts[2m [ tests/e2e/offline-banner.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/e2e/offline-banner.spec.ts:[2m21:6[22m[39m
    [90m 19| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m 20| [39m
    [90m 21| [39mtest[33m.[39m[34mdescribe[39m([32m'Offline Banner UX'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 22| [39m    test('should show offline banner when disconnected', async ({ pageâ€¦
    [90m 23| [39m        [35mawait[39m page[33m.[39m[34mgoto[39m([32m'/'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/7]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/e2e/wasm_features.spec.ts[2m [ tests/e2e/wasm_features.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/e2e/wasm_features.spec.ts:[2m20:6[22m[39m
    [90m 18| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m 19| [39m
    [90m 20| [39mtest[33m.[39m[34mdescribe[39m([32m'WASM & Engine Features'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 21| [39m
    [90m 22| [39m  [34mtest[39m([32m'should load WASM calculator correctly'[39m[33m,[39m [35masync[39m ({ page }) [33m=>[39m {

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/7]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/e2e/hardening/smoke_test.spec.ts[2m [ tests/e2e/hardening/smoke_test.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/e2e/hardening/smoke_test.spec.ts:[2m20:6[22m[39m
    [90m 18| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m 19| [39m
    [90m 20| [39mtest[33m.[39m[34mdescribe[39m([32m'Hardening Smoke Test'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 21| [39m  test('should load the application without crashing', async ({ page }â€¦
    [90m 22| [39m    [35mconst[39m consoleErrors[33m:[39m string[] [33m=[39m [][33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/7]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/e2e/hardening/trade_flow.spec.ts[2m [ tests/e2e/hardening/trade_flow.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/e2e/hardening/trade_flow.spec.ts:[2m20:6[22m[39m
    [90m 18| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m 19| [39m
    [90m 20| [39mtest[33m.[39m[34mdescribe[39m([32m'Trade Flow (Happy Path)'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 21| [39m  [90m// Mock API responses[39m
    [90m 22| [39m  test[33m.[39m[34mbeforeEach[39m([35masync[39m ({ page }) [33m=>[39m {

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/7]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/e2e/hardening/wasm-resilience.test.ts[2m [ tests/e2e/hardening/wasm-resilience.test.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/e2e/hardening/wasm-resilience.test.ts:[2m24:6[22m[39m
    [90m 22| [39m[35mconst[39m [33mWASM_PATH[39m [33m=[39m [32m'**/technicals_wasm_bg.wasm'[39m[33m;[39m
    [90m 23| [39m
    [90m 24| [39mtest[33m.[39m[34mdescribe[39m([32m'WASM Resilience & Hardening'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 25| [39m
    [90m 26| [39m    test('should retry loading WASM module upon network failure', asynâ€¦

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/7]âŽ¯[22m[39m


[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 1 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m src/tests/security/storage_hardening.test.ts[2m > [22mStorage Hardening Security[2m > [22mshould restore sensitive keys using Device Key on load
[31m[1mAssertionError[22m: expected "vi.fn()" to be called at least once[39m
[36m [2mâ¯[22m src/tests/security/storage_hardening.test.ts:[2m70:40[22m[39m
    [90m 68| [39m        [35mawait[39m [35mnew[39m [33mPromise[39m(resolve [33m=>[39m [34msetTimeout[39m(resolve[33m,[39m [34m0[39m))[33m;[39m
    [90m 69| [39m
    [90m 70| [39m        [34mexpect[39m(getOrGenerateDeviceKey)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                                       [31m^[39m
    [90m 71| [39m    })[33m;[39m
    [90m 72| [39m})[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/7]âŽ¯[22m[39m


[2m Test Files [22m [1m[31m7 failed[39m[22m[2m | [22m[1m[32m130 passed[39m[22m[2m | [22m[33m2 skipped[39m[90m (139)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m617 passed[39m[22m[2m | [22m[33m6 skipped[39m[90m (624)[39m
[2m   Start at [22m 17:09:00
[2m   Duration [22m 121.62s[2m (transform 28.06s, setup 10.69s, import 122.45s, tests 34.15s, environment 448.43s)[22m

