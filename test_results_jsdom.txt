
[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/home/pat/Dokumente/GitHub/cachy-app[39m

[90mstderr[2m | src/services/marketWatcher_hardening.test.ts
[22m[39m[GENERAL] IndexedDB not supported or SSR environment 

[90mstderr[2m | src/services/backupService.test.ts[2m > [22m[2mbackupService[2m > [22m[2mshould throw error when backing up corrupt localStorage data
[22m[39mBackup Logic: Detected corrupt JSON for key cryptoCalculatorSettings. Skipping.

 [31mâ¯[39m src/services/backupService.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 2041[2mms[22m[39m
[31m     [31mÃ—[31m should create a valid V4 backup[39m[33m 455[2mms[22m[39m
[31m     [31mÃ—[31m should restore a V4 backup correctly[39m[33m 683[2mms[22m[39m
[31m     [31mÃ—[31m should fail with incorrect password[39m[33m 522[2mms[22m[39m
     [33m[2mâœ“[22m[39m should throw error when backing up corrupt localStorage data [33m 374[2mms[22m[39m
 [32mâœ“[39m src/services/marketWatcher_perf.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 37[2mms[22m[39m
 [31mâ¯[39m src/services/marketWatcher_hardening.test.ts [2m([22m[2m3 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 41[2mms[22m[39m
     [32mâœ“[39m should not leak stagger timeouts[32m 17[2mms[22m[39m
     [32mâœ“[39m should handle API timeouts correctly without double wrapping[32m 5[2mms[22m[39m
[31m     [31mÃ—[31m should filter invalid klines in ensureHistory[39m[32m 14[2mms[22m[39m
 [32mâœ“[39m src/services/csvService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 30[2mms[22m[39m
 [31mâ¯[39m tests/tradeflow.spec.ts [2m([22m[2m0 test[22m[2m)[22m
 [32mâœ“[39m src/services/hotkeyService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32mâœ“[39m src/services/app.test.ts [2m([22m[2m17 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[32m 221[2mms[22m[39m
[90mstderr[2m | src/stores/settings.security.test.ts
[22m[39mWarning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype.

[90mstderr[2m | src/stores/settings.security.test.ts
[22m[39m[Settings] Store ready. Provider: bitunix

[90mstderr[2m | src/stores/settings.security.test.ts[2m > [22m[2mSettingsManager Security[2m > [22m[2mshould initially be unencrypted and unlocked (default)
[22m[39m[Settings] Store ready. Provider: bitunix

[90mstderr[2m | src/stores/settings.security.test.ts[2m > [22m[2mSettingsManager Security[2m > [22m[2mshould encrypt keys when setMasterPassword is called
[22m[39m[Settings] Store ready. Provider: bitunix

[90mstderr[2m | src/stores/settings.security.test.ts[2m > [22m[2mSettingsManager Security[2m > [22m[2mshould NOT serialize plain keys when encrypted
[22m[39m[Settings] Store ready. Provider: bitunix

[90mstderr[2m | src/stores/settings.security.test.ts[2m > [22m[2mSettingsManager Security[2m > [22m[2mshould lock the session and clear memory
[22m[39m[Settings] Store ready. Provider: bitunix

[90mstderr[2m | src/stores/settings.security.test.ts[2m > [22m[2mSettingsManager Security[2m > [22m[2mshould unlock and restore keys
[22m[39m[Settings] Store ready. Provider: bitunix

 [32mâœ“[39m src/stores/settings.security.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 131[2mms[22m[39m
[90mstdout[2m | tests/benchmarks/syncService_perf.test.ts[2m > [22m[2mfetchBatchedKlines Performance[2m > [22m[2mmeasures execution time for multiple scattered trades
[22m[39mExecution time for 20 symbols: 88.15ms

 [32mâœ“[39m tests/benchmarks/syncService_perf.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 130[2mms[22m[39m
[90mstderr[2m | src/tests/security/storage_hardening.test.ts
[22m[39m[Settings] Store ready. Provider: bitunix

[90mstderr[2m | src/tests/performance/startup_benchmark.test.ts
[22m[39m[MockLog:Warn] general: IndexedDB not supported or SSR environment

[90mstderr[2m | src/tests/security/storage_hardening.test.ts[2m > [22m[2mStorage Hardening Security[2m > [22m[2mshould restore sensitive keys using Device Key on load
[22m[39m[Settings] Store ready. Provider: bitunix

 [31mâ¯[39m src/tests/security/storage_hardening.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 119[2mms[22m[39m
[31m     [31mÃ—[31m should restore sensitive keys using Device Key on load[39m[32m 98[2mms[22m[39m
[90mstdout[2m | src/tests/performance/startup_benchmark.test.ts[2m > [22m[2mApp Startup Performance Benchmark[2m > [22m[2mmeasures startup time and request count
[22m[39m--- STARTUP BENCHMARK ---

 [31mâ¯[39m src/tests/performance/startup_benchmark.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 2713[2mms[22m[39m
[31m     [31mÃ—[31m measures startup time and request count[39m[33m 2707[2mms[22m[39m
[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mhandles 1.000 candles without timeout
[22m[39mðŸ‹ï¸   1000 candles: 152.4ms

[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mhandles 5.000 candles without timeout
[22m[39mðŸ‹ï¸   5000 candles: 168.5ms

[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mhandles 10.000 candles without timeout
[22m[39mðŸ‹ï¸  10000 candles: 209.7ms

 [31mâ¯[39m tests/e2e/wasm_features.spec.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m tests/e2e/offline-banner.spec.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mhandles 25.000 candles without timeout
[22m[39mðŸ‹ï¸  25000 candles: 590.9ms

 [31mâ¯[39m tests/e2e/hardening/smoke_test.spec.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mhandles 50.000 candles without timeout
[22m[39mðŸ‹ï¸  50000 candles: 799.9ms

[90mstdout[2m | src/tests/performance/engine_benchmark.test.ts[2m > [22m[2mEngine Performance Benchmarks[2m > [22m[2mcalculates 100 candles within budget
[22m[39mðŸ“Š    100 candles: median=23.3ms  throughput=4.294 candles/sec  runs=[24.8, 26.5, 23.3, 19.6, 7.5]

 [31mâ¯[39m tests/e2e/hardening/trade_flow.spec.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mconcurrent calculations produce correct independent results
[22m[39mâœ… Concurrent calculations are deterministic and independent

[90mstdout[2m | src/tests/performance/engine_benchmark.test.ts[2m > [22m[2mEngine Performance Benchmarks[2m > [22m[2mcalculates 1000 candles within budget
[22m[39mðŸ“Š   1000 candles: median=42.9ms  throughput=23.315 candles/sec  runs=[32.7, 69.3, 41.5, 42.9, 63.3]

[90mstdout[2m | src/tests/performance/memory_profiling.test.ts[2m > [22m[2mMemory Profiling[2m > [22m[2mdoes not leak memory over repeated calculations
[22m[39mðŸ§  Memory: before=49.1MB, after=64.3MB, growth=15.23MB over 50 iterations

[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mno shared-state corruption between sequential runs
[22m[39mâœ… No shared-state corruption between sequential runs

 [32mâœ“[39m src/tests/performance/load_testing.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 5109[2mms[22m[39m
     [33m[2mâœ“[22m[39m handles 10.000 candles without timeout [33m 508[2mms[22m[39m
     [33m[2mâœ“[22m[39m handles 25.000 candles without timeout [33m 1116[2mms[22m[39m
     [33m[2mâœ“[22m[39m handles 50.000 candles without timeout [33m 1975[2mms[22m[39m
     [33m[2mâœ“[22m[39m concurrent calculations produce correct independent results [33m 610[2mms[22m[39m
     [33m[2mâœ“[22m[39m no shared-state corruption between sequential runs [33m 402[2mms[22m[39m
[90mstdout[2m | src/tests/performance/engine_benchmark.test.ts[2m > [22m[2mEngine Performance Benchmarks[2m > [22m[2mcalculates 5000 candles within budget
[22m[39mðŸ“Š   5000 candles: median=89.1ms  throughput=56.105 candles/sec  runs=[89.1, 103.0, 94.8, 86.9, 85.6]

 [31mâ¯[39m tests/e2e/hardening/wasm-resilience.test.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src/tests/performance/engine_benchmark.test.ts[2m > [22m[2mEngine Performance Benchmarks[2m > [22m[2mcalculates 10000 candles within budget
[22m[39mðŸ“Š  10000 candles: median=173.7ms  throughput=57.564 candles/sec  runs=[198.5, 225.2, 173.7, 134.0, 154.1]

[90mstdout[2m | src/tests/performance/memory_profiling.test.ts[2m > [22m[2mMemory Profiling[2m > [22m[2mbuffer pool releases buffers correctly
[22m[39mðŸ”„ Buffer pool test: growth=-7.07MB over 100 iterations

 [31mâ¯[39m src/tests/performance/memory_profiling.test.ts [2m([22m[2m2 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 4094[2mms[22m[39m
[31m     [31mÃ—[31m does not leak memory over repeated calculations[39m[33m 2311[2mms[22m[39m
     [33m[2mâœ“[22m[39m buffer pool releases buffers correctly [33m 1776[2mms[22m[39m
[90mstdout[2m | src/tests/performance/engine_benchmark.test.ts[2m > [22m[2mEngine Performance Benchmarks[2m > [22m[2mthroughput scales linearly (no quadratic blowup)
[22m[39mðŸ“ˆ Scaling: 1k=14.4ms, 5k=91.4ms, ratio=6.36x (expect <8x)

 [32mâœ“[39m src/tests/performance/engine_benchmark.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 2777[2mms[22m[39m
     [33m[2mâœ“[22m[39m calculates 1000 candles within budget [33m 352[2mms[22m[39m
     [33m[2mâœ“[22m[39m calculates 5000 candles within budget [33m 650[2mms[22m[39m
     [33m[2mâœ“[22m[39m calculates 10000 candles within budget [33m 1284[2mms[22m[39m
 [32mâœ“[39m src/services/apiService.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 1612[2mms[22m[39m
     [33m[2mâœ“[22m[39m should handle AbortError correctly [33m 1575[2mms[22m[39m
 [32mâœ“[39m src/routes/api/chat-v2/server.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 172[2mms[22m[39m
[90mstderr[2m | src/stores/marketStore_limits.test.ts[2m > [22m[2mMarketStore Limits
[22m[39m[Settings] Store ready. Provider: bitunix

[90mstderr[2m | src/stores/marketStore_limits.test.ts[2m > [22m[2mMarketStore Limits[2m > [22m[2mshould enforce market data cache limit based on settings
[22m[39m[Settings] Save failed: ReferenceError: indexedDB is not defined
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:279:23
    at new Promise (<anonymous>)
    at CryptoServiceImpl.loadKeyFromDB [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:278:12[90m)[39m
    at CryptoServiceImpl.getOrGenerateDeviceKey [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:245:26[90m)[39m
    at SettingsManager.getDeviceKey [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:951:37[90m)[39m
    at SettingsManager.save [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:1384:41[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:894:20
    at callTimer [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/chunks/vi.2VT5v0um.js:2111:25[90m)[39m
    at doTickInner [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/chunks/vi.2VT5v0um.js:2714:30[90m)[39m
    at Immediate.nextPromiseTick [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/chunks/vi.2VT5v0um.js:2775:26[90m)[39m

[90mstderr[2m | src/stores/marketStore_limits.test.ts[2m > [22m[2mMarketStore Limits[2m > [22m[2mshould respect updated cache limit
[22m[39m[Settings] Save failed: ReferenceError: indexedDB is not defined
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:279:23
    at new Promise (<anonymous>)
    at CryptoServiceImpl.loadKeyFromDB [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:278:12[90m)[39m
    at CryptoServiceImpl.getOrGenerateDeviceKey [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/cryptoService.ts:245:26[90m)[39m
    at SettingsManager.getDeviceKey [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:951:37[90m)[39m
    at SettingsManager.save [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:1384:41[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/settings.svelte.ts:894:20
    at callTimer [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/chunks/vi.2VT5v0um.js:2111:25[90m)[39m
    at doTickInner [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/chunks/vi.2VT5v0um.js:2714:30[90m)[39m
    at Immediate.nextPromiseTick [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/chunks/vi.2VT5v0um.js:2775:26[90m)[39m

 [32mâœ“[39m src/stores/marketStore_limits.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 1088[2mms[22m[39m
[90mstdout[2m | src/benchmarks/marketWatcher_backfill.test.ts[2m > [22m[2mMarketWatcher Backfill Performance[2m > [22m[2mmeasures sequential backfill
[22m[39mExecution Time: 1499ms

 [32mâœ“[39m src/benchmarks/marketWatcher_backfill.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 1522[2mms[22m[39m
     [33m[2mâœ“[22m[39m measures sequential backfill [33m 1516[2mms[22m[39m
 [32mâœ“[39m src/services/storageService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 330[2mms[22m[39m
[90mstdout[2m | src/routes/api/klines/klines.test.ts[2m > [22m[2mGET /api/klines[2m > [22m[2mshould return klines with string properties from Bitunix
[22m[39m[Bitunix API] BTCUSDT:1d requested 50 with end undefined. Got 2. FirstTS: 1600000000, LastTS: 1600000060

[90mstdout[2m | src/routes/api/klines/klines.test.ts[2m > [22m[2mGET /api/klines[2m > [22m[2mshould handle numeric inputs from Bitunix correctly
[22m[39m[Bitunix API] BTCUSDT:1d requested 50 with end undefined. Got 1. FirstTS: 1600000000, LastTS: 1600000000

[90mstdout[2m | src/routes/api/klines/klines.test.ts[2m > [22m[2mGET /api/klines[2m > [22m[2mshould preserve small numbers without scientific notation if string provided
[22m[39m[Bitunix API] PEPEUSDT:1d requested 50 with end undefined. Got 1. FirstTS: 1600000000, LastTS: 1600000000

 [32mâœ“[39m src/routes/api/klines/klines.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 43[2mms[22m[39m
[90mstdout[2m | src/services/incrementalCache.test.ts[2m > [22m[2mIncrementalCache[2m > [22m[2mLRU Eviction[2m > [22m[2mshould evict least recently used entry when over max size
[22m[39m[IncrementalCache] Evicted LRU entry: SYM2:1m

 [32mâœ“[39m src/services/technicalsService.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 109[2mms[22m[39m
[90mstdout[2m | src/services/incrementalCache.test.ts[2m > [22m[2mIncrementalCache[2m > [22m[2mTTL Cleanup[2m > [22m[2mshould remove expired entries
[22m[39m[IncrementalCache] Cleaned up 1 stale entries

 [32mâœ“[39m src/services/incrementalCache.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 206[2mms[22m[39m
 [32mâœ“[39m src/tests/security/headers.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m src/routes/api/sync/orders/security.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 62[2mms[22m[39m
 [32mâœ“[39m src/workers/technicals.worker.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 87[2mms[22m[39m
 [32mâœ“[39m src/lib/server/auth.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 38[2mms[22m[39m
 [32mâœ“[39m src/tests/unit/edge_cases.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 236[2mms[22m[39m
 [32mâœ“[39m src/tests/security/cmc_proxy.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 39[2mms[22m[39m
 [32mâœ“[39m src/routes/api/external/news/news_security.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 89[2mms[22m[39m
 [32mâœ“[39m src/utils/mfi_correctness.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 115[2mms[22m[39m
 [32mâœ“[39m src/utils/inputUtils.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 134[2mms[22m[39m
 [32mâœ“[39m src/lib/server/sanitizer.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 63[2mms[22m[39m
 [32mâœ“[39m src/routes/api/account/account.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 70[2mms[22m[39m
 [32mâœ“[39m tests/verify_tpsl_validation.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 51[2mms[22m[39m
[90mstderr[2m | src/routes/api/sentiment/sentiment.test.ts[2m > [22m[2mPOST /api/sentiment error handling[2m > [22m[2mshould return 500 and error message when a standard Error is thrown
[22m[39mSentiment API Error: Error: Test Error
    at default.<instance_members_initializer> [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/sentiment/sentiment.test.ts:30:55[90m)[39m
    at new default [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/sentiment/sentiment.test.ts:27:18[90m)[39m
    at Module.POST [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/sentiment/+server.ts:37:28[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:104:5)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/sentiment/sentiment.test.ts:57:26
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20

 [32mâœ“[39m src/routes/api/sentiment/sentiment.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 39[2mms[22m[39m
 [32mâœ“[39m tests/unit/timeUtils.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 136[2mms[22m[39m
 [32mâœ“[39m src/utils/indicators.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 57[2mms[22m[39m
 [32mâœ“[39m src/routes/api/stream-logs/server.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 51[2mms[22m[39m
 [32mâœ“[39m src/services/apiService_rateLimit.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 63[2mms[22m[39m
[90mstderr[2m | src/routes/api/external/news/news_service_memory.test.ts[2m > [22m[2mNews Service Cache Memory[2m > [22m[2mshould limit cache size to 50 items (optimization)
[22m[39m[NewsProxy] NewsAPI Schema Validation Warning: ZodError: [
  {
    "expected": "string",
    "code": "invalid_type",
    "path": [
      "status"
    ],
    "message": "Invalid input: expected string, received undefined"
  }
]
    at new ZodError [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mzod[24m/v4/core/core.js:39:39[90m)[39m
    at Module.<anonymous> [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mzod[24m/v4/core/parse.js:40:20[90m)[39m
    at _.inst.safeParse [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mzod[24m/v4/classic/schemas.js:40:46[90m)[39m
    at executeRequest [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/external/news/+server.ts:148:50[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:104:5)[39m
    at POST [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/external/news/+server.ts:165:20[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/external/news/news_service_memory.test.ts:59:9
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | src/routes/api/external/news/news_service_memory.test.ts[2m > [22m[2mNews Service Cache Memory[2m > [22m[2mshould limit cache size to 50 items (optimization)
[22m[39m[NewsProxy] Error processing request for undefined: Upstream response failed schema validation

 [32mâœ“[39m src/routes/api/external/news/news_service_memory.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 60[2mms[22m[39m
 [32mâœ“[39m src/routes/api/external/cmc/cmc_auth.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 71[2mms[22m[39m
 [32mâœ“[39m src/services/workerPool.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 96[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_safety.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 47[2mms[22m[39m
 [32mâœ“[39m src/tests/security/log_stream_auth.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 59[2mms[22m[39m
 [32mâœ“[39m src/services/omsService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 104[2mms[22m[39m
 [32mâœ“[39m src/routes/api/sync/sync_security.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 55[2mms[22m[39m
 [32mâœ“[39m src/utils/networkMonitor.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 53[2mms[22m[39m
 [32mâœ“[39m src/routes/api/sync/positions-history/positions_history_security.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 40[2mms[22m[39m
[90mstdout[2m | src/utils/storageUtils.test.ts[2m > [22m[2mstorageUtils[2m > [22m[2mshould correct drift via async verification on startup
[22m[39m[StorageUtils] Correcting usage cache drift: 4 -> 8

 [32mâœ“[39m src/utils/storageUtils.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 65[2mms[22m[39m
 [32mâœ“[39m src/services/chartPatterns.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 81[2mms[22m[39m
 [32mâœ“[39m tests/auth_fail_closed.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mâœ“[39m tests/repro_calculator.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 63[2mms[22m[39m
 [32mâœ“[39m src/utils/retryPolicy.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 78[2mms[22m[39m
 [32mâœ“[39m src/lib/calculators/rolling_stats.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 135[2mms[22m[39m
 [32mâœ“[39m src/lib/calculator_charts.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 88[2mms[22m[39m
[90mstderr[2m | src/services/bitunixWs.test.ts[2m > [22m[2mBitunixWS Fast Path Fallback[2m > [22m[2mshould FALLBACK to standard validation if Fast Path throws (using Ticker channel)
[22m[39m[BitunixWS] FastPath error (ticker): Error: Fast Path Crash
    at Object.<anonymous> [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/bitunixWs.test.ts:133:19[90m)[39m
    at Object.Mock [as normalizeTicker] [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/spy[24m/dist/index.js:285:34[90m)[39m
    at BitunixWebSocketService.handleMessage [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/bitunixWs.ts:945:51[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/bitunixWs.test.ts:145:19
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

 [32mâœ“[39m src/services/bitunixWs.test.ts [2m([22m[2m6 tests[22m[2m)[22m[33m 331[2mms[22m[39m
 [32mâœ“[39m src/lib/calculators/new_charts.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 57[2mms[22m[39m
 [32mâœ“[39m src/stores/market.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 149[2mms[22m[39m
 [32mâœ“[39m src/utils/bufferPool.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 40[2mms[22m[39m
 [32mâœ“[39m src/services/logger.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 187[2mms[22m[39m
 [32mâœ“[39m src/utils/statefulTechnicalsCalculator.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 39[2mms[22m[39m
 [32mâœ“[39m src/services/newsService_limit.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 60[2mms[22m[39m
[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould initialize correctly
[22m[39m[WebGPU] Initialized pipelines

[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould handle Float32Array params
[22m[39m[WebGPU] Initialized pipelines

[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould handle ArrayBuffer params (mixed types)
[22m[39m[WebGPU] Initialized pipelines

[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould handle Uint32Array params
[22m[39m[WebGPU] Initialized pipelines

[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould handle number[] params (default to Uint32Array)
[22m[39m[WebGPU] Initialized pipelines

[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould handle multiple outputs
[22m[39m[WebGPU] Initialized pipelines

 [32mâœ“[39m tests/unit/webGpuCalculator.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 56[2mms[22m[39m
 [32mâœ“[39m src/lib/calculator.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 63[2mms[22m[39m
 [32mâœ“[39m src/lib/server/logger.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_race.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 34[2mms[22m[39m
 [32mâœ“[39m tests/unit/circularBuffer.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 45[2mms[22m[39m
[90mstderr[2m | src/stores/marketStore.test.ts
[22m[39m[Settings] Store ready. Provider: bitunix

 [32mâœ“[39m src/stores/marketStore.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 55[2mms[22m[39m
 [32mâœ“[39m src/lib/calculators/stats.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32mâœ“[39m src/services/bitunixWs_leak.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 94[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_flashClose_hardening.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 37[2mms[22m[39m
[90mstderr[2m | src/stores/account.test.ts[2m > [22m[2mAccountManager[2m > [22m[2mshould trigger sync callback on partial update for unknown position (Race Condition Fix)
[22m[39mBitunix WS: Ignored position update due to missing side. Requesting full sync. {
  positionId: [32m'999'[39m,
  symbol: [32m'ETHUSDT'[39m,
  qty: [32m'10.0'[39m,
  unrealizedPNL: [32m'50'[39m
}

 [32mâœ“[39m src/stores/account.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 43[2mms[22m[39m
 [32mâœ“[39m src/services/patternDetection.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32mâœ“[39m src/lib/calculator_duration.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m src/tests/tradeService_race.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_hardening.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 42[2mms[22m[39m
[90mstdout[2m | src/utils/tests/precision_loss.test.ts[2m > [22m[2mCritical: JSON Precision Loss & Hardening[2m > [22m[2mverifies that safeJsonParse preserves large integers as strings
[22m[39m[Safe Parse] Raw ID:    1234567890123456789
[Safe Parse] Parsed ID: 1234567890123456789 (Type: string)

 [32mâœ“[39m src/utils/tests/precision_loss.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 30[2mms[22m[39m
 [32mâœ“[39m src/tests/flash-close.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 39[2mms[22m[39m
 [32mâœ“[39m src/utils/utils.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 55[2mms[22m[39m
 [32mâœ“[39m src/tests/decimal-enforcement.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 28[2mms[22m[39m
 [32mâœ“[39m src/tests/hardening/float_safety.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 49[2mms[22m[39m
 [32mâœ“[39m src/utils/technicalsCalculator.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m src/services/bitunixWs_fastpath.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m src/utils/safeJson_hardening.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m tests/unit/logger_security.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32mâœ“[39m src/config/rssPresets.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 30[2mms[22m[39m
 [32mâœ“[39m src/services/marketAnalyst.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m src/services/marketWatcher.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 51[2mms[22m[39m
 [32mâœ“[39m src/tests/unit/indicators_cci.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m src/tests/provider-switch.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m src/types/apiSchemas.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m src/services/apiService.repro.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 36[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_flashClose.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 21[2mms[22m[39m
 [32mâœ“[39m src/stores/analysisStore.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 59[2mms[22m[39m
[90mstdout[2m | src/services/reproduction_ghost_order.test.ts[2m > [22m[2mGhost Order Reproduction[2m > [22m[2mshould cleanup ghost orders
[22m[39mGhost Order Successfully Removed

 [32mâœ“[39m src/services/reproduction_ghost_order.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mâœ“[39m tests/unit/fastConversion.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32mâœ“[39m src/utils/safeJson.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 41[2mms[22m[39m
 [32mâœ“[39m src/services/mappers.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 35[2mms[22m[39m
[90mstdout[2m | src/tests/hardening/server_precision_repro.test.ts[2m > [22m[2mServer-Side Precision Loss Reproduction[2m > [22m[2mshould demonstrate that native JSON.parse corrupts 19-digit integers
[22m[39m[Repro] Native Parse: 1234567890123456789 -> 1234567890123456800

[90mstdout[2m | src/tests/hardening/server_precision_repro.test.ts[2m > [22m[2mServer-Side Precision Loss Reproduction[2m > [22m[2mshould demonstrate that safeJsonParse preserves 19-digit integers as strings
[22m[39m[Repro] Safe Parse:   1234567890123456789 -> 1234567890123456789

 [32mâœ“[39m src/tests/hardening/server_precision_repro.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 28[2mms[22m[39m
 [32mâœ“[39m src/services/julesService.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 37[2mms[22m[39m
 [32mâœ“[39m src/services/apiService_recursion.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 27[2mms[22m[39m
 [32mâœ“[39m src/utils/technicalsPresenter.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 31[2mms[22m[39m
 [32mâœ“[39m src/utils/fastConversion.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 24[2mms[22m[39m
 [32mâœ“[39m src/stores/chat.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m src/services/csvService_hardening.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32mâœ“[39m src/services/cloudService.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m src/services/serializationService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m src/utils/safeJson_integers.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m src/utils/errorUtils.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m src/tests/safeJson.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m src/lib/calculators/getQualityData.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 24[2mms[22m[39m
 [32mâœ“[39m src/tests/unit/indicators_ao.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mâœ“[39m src/utils/slidingWindow.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 30[2mms[22m[39m
 [32mâœ“[39m src/services/bitunixWs.leak.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mâœ“[39m src/tests/flash_close_race_repro.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 60[2mms[22m[39m
 [32mâœ“[39m src/utils/utils_timestamp.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 94[2mms[22m[39m
 [32mâœ“[39m src/services/marketWatcher_fillGaps.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_serialization.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m src/utils/stochRsi_correctness.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mâœ“[39m src/utils/incremental_indicators.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m src/services/mdaService.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 40[2mms[22m[39m
[90mstdout[2m | src/utils/indicators_precision.test.ts[2m > [22m[2mindicators precision[2m > [22m[2mbb (Bollinger Bands)[2m > [22m[2mshould handle high-value low-volatility assets without catastrophic cancellation
[22m[39mCalculated StdDev: [33m0.049999999995634425[39m

 [32mâœ“[39m src/utils/indicators_precision.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mâœ“[39m src/utils/safeJson_precision.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32mâœ“[39m src/utils/timeUtils.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mâœ“[39m src/services/smc/smcService.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m src/tests/unit/indicators_mfi.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 17[2mms[22m[39m
 [32mâœ“[39m src/stores/tradeStore.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m src/tests/precision.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 28[2mms[22m[39m
 [32mâœ“[39m src/utils/divergenceScanner.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 15[2mms[22m[39m
 [32mâœ“[39m tests/integration/wasm_parity.test.ts [2m([22m[2m2 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[32m 17[2mms[22m[39m
 [2m[90mâ†“[39m[22m src/services/cryptoService.test.ts [2m([22m[2m3 tests[22m[2m | [22m[33m3 skipped[39m[2m)[22m
 [32mâœ“[39m src/services/bitunixWs_hardening.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService.repro.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 9[2mms[22m[39m
 [2m[90mâ†“[39m[22m src/tests/performance/market_watcher_concurrency.test.ts [2m([22m[2m1 test[22m[2m | [22m[33m1 skipped[39m[2m)[22m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Suites 6 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m tests/tradeflow.spec.ts[2m [ tests/tradeflow.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/tradeflow.spec.ts:[2m20:6[22m[39m
    [90m 18| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m 19| [39m
    [90m 20| [39mtest[33m.[39m[34mdescribe[39m([32m'TradeFlow Visual Verification'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 21| [39m    test[33m.[39m[34mbeforeEach[39m([35masync[39m ({ page }) [33m=>[39m {
    [90m 22| [39m        [35mawait[39m page[33m.[39m[34mgoto[39m([32m'/'[39m)[33m;[39m 

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/e2e/offline-banner.spec.ts[2m [ tests/e2e/offline-banner.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/e2e/offline-banner.spec.ts:[2m21:6[22m[39m
    [90m 19| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m 20| [39m
    [90m 21| [39mtest[33m.[39m[34mdescribe[39m([32m'Offline Banner UX'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 22| [39m    test('should show offline banner when disconnected', async ({ pageâ€¦
    [90m 23| [39m        [35mawait[39m page[33m.[39m[34mgoto[39m([32m'/'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/e2e/wasm_features.spec.ts[2m [ tests/e2e/wasm_features.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/e2e/wasm_features.spec.ts:[2m20:6[22m[39m
    [90m 18| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m 19| [39m
    [90m 20| [39mtest[33m.[39m[34mdescribe[39m([32m'WASM & Engine Features'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 21| [39m
    [90m 22| [39m  [34mtest[39m([32m'should load WASM calculator correctly'[39m[33m,[39m [35masync[39m ({ page }) [33m=>[39m {

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/e2e/hardening/smoke_test.spec.ts[2m [ tests/e2e/hardening/smoke_test.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/e2e/hardening/smoke_test.spec.ts:[2m20:6[22m[39m
    [90m 18| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m 19| [39m
    [90m 20| [39mtest[33m.[39m[34mdescribe[39m([32m'Hardening Smoke Test'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 21| [39m  test('should load the application without crashing', async ({ page }â€¦
    [90m 22| [39m    [35mconst[39m consoleErrors[33m:[39m string[] [33m=[39m [][33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/e2e/hardening/trade_flow.spec.ts[2m [ tests/e2e/hardening/trade_flow.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/e2e/hardening/trade_flow.spec.ts:[2m20:6[22m[39m
    [90m 18| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m 19| [39m
    [90m 20| [39mtest[33m.[39m[34mdescribe[39m([32m'Trade Flow (Happy Path)'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 21| [39m  [90m// Mock API responses[39m
    [90m 22| [39m  test[33m.[39m[34mbeforeEach[39m([35masync[39m ({ page }) [33m=>[39m {

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/e2e/hardening/wasm-resilience.test.ts[2m [ tests/e2e/hardening/wasm-resilience.test.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/e2e/hardening/wasm-resilience.test.ts:[2m24:6[22m[39m
    [90m 22| [39m[35mconst[39m [33mWASM_PATH[39m [33m=[39m [32m'**/technicals_wasm_bg.wasm'[39m[33m;[39m
    [90m 23| [39m
    [90m 24| [39mtest[33m.[39m[34mdescribe[39m([32m'WASM Resilience & Hardening'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 25| [39m
    [90m 26| [39m    test('should retry loading WASM module upon network failure', asynâ€¦

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/13]âŽ¯[22m[39m


[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 7 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m src/services/backupService.test.ts[2m > [22mbackupService[2m > [22mshould create a valid V4 backup
[31m[1mTypeError[22m: capturedBlob.text is not a function[39m
[36m [2mâ¯[22m src/services/backupService.test.ts:[2m85:64[22m[39m
    [90m 83| [39m
    [90m 84| [39m    [34mexpect[39m(capturedBlob)[33m.[39mnot[33m.[39m[34mtoBeNull[39m()[33m;[39m
    [90m 85| [39m    [35mconst[39m backupText [33m=[39m [35mawait[39m (capturedBlob [35mas[39m unknown [35mas[39m [33mBlob[39m)[33m.[39m[34mtext[39m()[33m;[39m
    [90m   | [39m                                                               [31m^[39m
    [90m 86| [39m    [35mconst[39m backupData [33m=[39m [33mJSON[39m[33m.[39m[34mparse[39m(backupText)[33m;[39m
    [90m 87| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/services/backupService.test.ts[2m > [22mbackupService[2m > [22mshould restore a V4 backup correctly
[31m[1mTypeError[22m: capturedBlob.text is not a function[39m
[36m [2mâ¯[22m src/services/backupService.test.ts:[2m118:64[22m[39m
    [90m116| [39m
    [90m117| [39m    [34mexpect[39m(capturedBlob)[33m.[39mnot[33m.[39m[34mtoBeNull[39m()[33m;[39m
    [90m118| [39m    [35mconst[39m backupText [33m=[39m [35mawait[39m (capturedBlob [35mas[39m unknown [35mas[39m [33mBlob[39m)[33m.[39m[34mtext[39m()[33m;[39m
    [90m   | [39m                                                               [31m^[39m
    [90m119| [39m
    [90m120| [39m    [90m// Clear and Restore[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/services/backupService.test.ts[2m > [22mbackupService[2m > [22mshould fail with incorrect password
[31m[1mTypeError[22m: capturedBlob.text is not a function[39m
[36m [2mâ¯[22m src/services/backupService.test.ts:[2m150:64[22m[39m
    [90m148| [39m
    [90m149| [39m    [35mawait[39m backupService[33m.[39m[34mcreateBackup[39m([32m"password"[39m)[33m;[39m
    [90m150| [39m    [35mconst[39m backupText [33m=[39m [35mawait[39m (capturedBlob [35mas[39m unknown [35mas[39m [33mBlob[39m)[33m.[39m[34mtext[39m()[33m;[39m
    [90m   | [39m                                                               [31m^[39m
    [90m151| [39m
    [90m152| [39m    const result = await backupService.restoreFromBackup(backupText, "â€¦

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/services/marketWatcher_hardening.test.ts[2m > [22mMarketWatcher Hardening[2m > [22mshould filter invalid klines in ensureHistory
[31m[1mReferenceError[22m: marketState is not defined[39m
[36m [2mâ¯[22m src/services/marketWatcher_hardening.test.ts:[2m127:6[22m[39m
    [90m125| [39m
    [90m126| [39m    [90m// Reset mocks[39m
    [90m127| [39m    (marketState[33m.[39mupdateSymbolKlines [35mas[39m any)[33m.[39m[34mmockClear[39m()[33m;[39m
    [90m   | [39m     [31m^[39m
    [90m128| [39m    (apiService.fetchBitunixKlines as any).mockResolvedValue([invalidKâ€¦
    [90m129| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/tests/performance/memory_profiling.test.ts[2m > [22mMemory Profiling[2m > [22mdoes not leak memory over repeated calculations
[31m[1mAssertionError[22m: expected 15.232192993164062 to be less than 10[39m
[36m [2mâ¯[22m src/tests/performance/memory_profiling.test.ts:[2m84:26[22m[39m
    [90m 82| [39m
    [90m 83| [39m    [90m// Allow up to 10MB growth (GC may not run precisely)[39m
    [90m 84| [39m    [34mexpect[39m(heapGrowthMB)[33m.[39m[34mtoBeLessThan[39m([34m10[39m)[33m;[39m
    [90m   | [39m                         [31m^[39m
    [90m 85| [39m  }[33m,[39m [34m60000[39m)[33m;[39m
    [90m 86| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/tests/performance/startup_benchmark.test.ts[2m > [22mApp Startup Performance Benchmark[2m > [22mmeasures startup time and request count
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2mâ¯[22m src/tests/performance/startup_benchmark.test.ts:[2m188:25[22m[39m
    [90m186| [39m    [35mconst[39m priceLoaded [33m=[39m [35mawait[39m [34mwaitForPrice[39m()[33m;[39m
    [90m187| [39m    [35mconst[39m priceTime [33m=[39m performance[33m.[39m[34mnow[39m()[33m;[39m
    [90m188| [39m    [34mexpect[39m(priceLoaded)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m                        [31m^[39m
    [90m189| [39m    console.log(`[Perf] Time to First Price: ${(priceTime - start).toFâ€¦
    [90m190| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/tests/security/storage_hardening.test.ts[2m > [22mStorage Hardening Security[2m > [22mshould restore sensitive keys using Device Key on load
[31m[1mAssertionError[22m: expected "vi.fn()" to be called at least once[39m
[36m [2mâ¯[22m src/tests/security/storage_hardening.test.ts:[2m70:40[22m[39m
    [90m 68| [39m        [35mawait[39m [35mnew[39m [33mPromise[39m(resolve [33m=>[39m [34msetTimeout[39m(resolve[33m,[39m [34m0[39m))[33m;[39m
    [90m 69| [39m
    [90m 70| [39m        [34mexpect[39m(getOrGenerateDeviceKey)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                                       [31m^[39m
    [90m 71| [39m    })[33m;[39m
    [90m 72| [39m})[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/13]âŽ¯[22m[39m


[2m Test Files [22m [1m[31m11 failed[39m[22m[2m | [22m[1m[32m126 passed[39m[22m[2m | [22m[33m2 skipped[39m[90m (139)[39m
[2m      Tests [22m [1m[31m7 failed[39m[22m[2m | [22m[1m[32m611 passed[39m[22m[2m | [22m[33m6 skipped[39m[90m (624)[39m
[2m   Start at [22m 16:35:04
[2m   Duration [22m 92.95s[2m (transform 35.59s, setup 8.62s, import 119.02s, tests 28.10s, environment 346.87s)[22m

