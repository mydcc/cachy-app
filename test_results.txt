
[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/home/pat/Dokumente/GitHub/cachy-app[39m

 [31mâ¯[39m tests/tradeflow.spec.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m src/services/backupService.test.ts [2m([22m[2m0 test[22m[2m)[22m
(node:244008) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
 [31mâ¯[39m src/stores/marketStore.test.ts [2m([22m[2m0 test[22m[2m)[22m
(node:244044) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
(node:244037) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
 [31mâ¯[39m src/services/hotkeyService.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m src/services/csvService.test.ts [2m([22m[2m0 test[22m[2m)[22m
(node:244024) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
 [31mâ¯[39m src/services/app.test.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstderr[2m | src/services/marketWatcher_hardening.test.ts
[22m[39mFailed to load trade state TypeError: localStorage.getItem is not a function
    at TradeManager.load [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/trade.svelte.ts:222:35[90m)[39m
    at new TradeManager [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/trade.svelte.ts:199:12[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/trade.svelte.ts:506:14
[90m    at processTicksAndRejections (node:internal/process/task_queues:104:5)[39m
    at VitestModuleEvaluator._runInlinedModule [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/module-evaluator.js:196:4[90m)[39m
    at VitestModuleRunner.directRequest [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvite[24m/dist/node/module-runner.js:1146:59[90m)[39m
    at VitestModuleRunner.cachedRequest [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvite[24m/dist/node/module-runner.js:1053:73[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/marketWatcher.ts:25:1
    at VitestModuleEvaluator._runInlinedModule [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/module-evaluator.js:196:4[90m)[39m
    at VitestModuleRunner.directRequest [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvite[24m/dist/node/module-runner.js:1146:59[90m)[39m

(node:244573) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
 [31mâ¯[39m src/services/marketWatcher_hardening.test.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstderr[2m | src/services/marketWatcher_perf.test.ts
[22m[39mFailed to load trade state TypeError: localStorage.getItem is not a function
    at TradeManager.load [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/trade.svelte.ts:222:35[90m)[39m
    at new TradeManager [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/trade.svelte.ts:199:12[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/trade.svelte.ts:506:14
[90m    at processTicksAndRejections (node:internal/process/task_queues:104:5)[39m
    at VitestModuleEvaluator._runInlinedModule [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/module-evaluator.js:196:4[90m)[39m
    at VitestModuleRunner.directRequest [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvite[24m/dist/node/module-runner.js:1146:59[90m)[39m
    at VitestModuleRunner.cachedRequest [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvite[24m/dist/node/module-runner.js:1053:73[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/marketWatcher.ts:25:1
    at VitestModuleEvaluator._runInlinedModule [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/module-evaluator.js:196:4[90m)[39m
    at VitestModuleRunner.directRequest [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvite[24m/dist/node/module-runner.js:1146:59[90m)[39m

(node:244580) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
 [31mâ¯[39m src/services/marketWatcher_perf.test.ts [2m([22m[2m0 test[22m[2m)[22m
(node:244595) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
 [31mâ¯[39m tests/benchmarks/syncService_perf.test.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstderr[2m | src/stores/settings.security.test.ts
[22m[39mWarning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype.

(node:244010) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
 [31mâ¯[39m src/stores/settings.security.test.ts [2m([22m[2m0 test[22m[2m)[22m
(node:244629) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
 [31mâ¯[39m src/tests/security/storage_hardening.test.ts [2m([22m[2m0 test[22m[2m)[22m
(node:244615) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
 [31mâ¯[39m src/tests/performance/startup_benchmark.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m tests/e2e/offline-banner.spec.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m tests/e2e/wasm_features.spec.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src/tests/performance/engine_benchmark.test.ts[2m > [22m[2mEngine Performance Benchmarks[2m > [22m[2mcalculates 100 candles within budget
[22m[39mğŸ“Š    100 candles: median=10.1ms  throughput=9.911 candles/sec  runs=[18.1, 10.1, 10.0, 5.2, 11.4]

[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mhandles 1.000 candles without timeout
[22m[39mğŸ‹ï¸   1000 candles: 170.0ms

[90mstdout[2m | src/tests/performance/engine_benchmark.test.ts[2m > [22m[2mEngine Performance Benchmarks[2m > [22m[2mcalculates 1000 candles within budget
[22m[39mğŸ“Š   1000 candles: median=56.6ms  throughput=17.653 candles/sec  runs=[38.2, 110.3, 56.6, 48.6, 63.5]

[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mhandles 5.000 candles without timeout
[22m[39mğŸ‹ï¸   5000 candles: 247.0ms

 [31mâ¯[39m tests/e2e/hardening/smoke_test.spec.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mhandles 10.000 candles without timeout
[22m[39mğŸ‹ï¸  10000 candles: 240.7ms

[90mstdout[2m | src/tests/performance/engine_benchmark.test.ts[2m > [22m[2mEngine Performance Benchmarks[2m > [22m[2mcalculates 5000 candles within budget
[22m[39mğŸ“Š   5000 candles: median=112.5ms  throughput=44.461 candles/sec  runs=[87.7, 115.1, 117.0, 72.4, 112.5]

 [31mâ¯[39m tests/e2e/hardening/trade_flow.spec.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m tests/e2e/hardening/wasm-resilience.test.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src/tests/performance/memory_profiling.test.ts[2m > [22m[2mMemory Profiling[2m > [22m[2mdoes not leak memory over repeated calculations
[22m[39mğŸ§  Memory: before=22.6MB, after=17.3MB, growth=-5.28MB over 50 iterations

[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mhandles 25.000 candles without timeout
[22m[39mğŸ‹ï¸  25000 candles: 425.8ms

[90mstdout[2m | src/tests/performance/engine_benchmark.test.ts[2m > [22m[2mEngine Performance Benchmarks[2m > [22m[2mcalculates 10000 candles within budget
[22m[39mğŸ“Š  10000 candles: median=145.2ms  throughput=68.881 candles/sec  runs=[181.8, 138.9, 180.9, 145.2, 103.6]

[90mstdout[2m | src/tests/performance/engine_benchmark.test.ts[2m > [22m[2mEngine Performance Benchmarks[2m > [22m[2mthroughput scales linearly (no quadratic blowup)
[22m[39mğŸ“ˆ Scaling: 1k=13.2ms, 5k=98.1ms, ratio=7.41x (expect <8x)

 [32mâœ“[39m src/tests/performance/engine_benchmark.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 2906[2mms[22m[39m
     [33m[2mâœ“[22m[39m calculates 1000 candles within budget [33m 407[2mms[22m[39m
     [33m[2mâœ“[22m[39m calculates 5000 candles within budget [33m 870[2mms[22m[39m
     [33m[2mâœ“[22m[39m calculates 10000 candles within budget [33m 1173[2mms[22m[39m
 [32mâœ“[39m src/services/storageService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 327[2mms[22m[39m
[90mstderr[2m | src/stores/marketStore_limits.test.ts[2m > [22m[2mMarketStore Limits
[22m[39m[Settings] Store ready. Provider: bitunix

 [32mâœ“[39m src/stores/marketStore_limits.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 1004[2mms[22m[39m
[90mstdout[2m | src/services/incrementalCache.test.ts[2m > [22m[2mIncrementalCache[2m > [22m[2mLRU Eviction[2m > [22m[2mshould evict least recently used entry when over max size
[22m[39m[IncrementalCache] Evicted LRU entry: SYM2:1m

 [32mâœ“[39m src/services/apiService.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 1618[2mms[22m[39m
     [33m[2mâœ“[22m[39m should handle AbortError correctly [33m 1591[2mms[22m[39m
[90mstdout[2m | src/services/incrementalCache.test.ts[2m > [22m[2mIncrementalCache[2m > [22m[2mTTL Cleanup[2m > [22m[2mshould remove expired entries
[22m[39m[IncrementalCache] Cleaned up 1 stale entries

 [32mâœ“[39m src/services/incrementalCache.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 181[2mms[22m[39m
[90mstdout[2m | src/tests/performance/memory_profiling.test.ts[2m > [22m[2mMemory Profiling[2m > [22m[2mbuffer pool releases buffers correctly
[22m[39mğŸ”„ Buffer pool test: growth=9.69MB over 100 iterations

 [32mâœ“[39m src/tests/performance/memory_profiling.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 3679[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not leak memory over repeated calculations [33m 2402[2mms[22m[39m
     [33m[2mâœ“[22m[39m buffer pool releases buffers correctly [33m 1268[2mms[22m[39m
[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mhandles 50.000 candles without timeout
[22m[39mğŸ‹ï¸  50000 candles: 589.4ms

 [32mâœ“[39m src/tests/unit/edge_cases.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 166[2mms[22m[39m
[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mconcurrent calculations produce correct independent results
[22m[39mâœ… Concurrent calculations are deterministic and independent

 [32mâœ“[39m src/routes/api/external/cmc/cmc_auth.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 123[2mms[22m[39m
[90mstdout[2m | src/tests/performance/load_testing.test.ts[2m > [22m[2mLoad Testing[2m > [22m[2mno shared-state corruption between sequential runs
[22m[39mâœ… No shared-state corruption between sequential runs

 [32mâœ“[39m src/tests/performance/load_testing.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 4485[2mms[22m[39m
     [33m[2mâœ“[22m[39m handles 5.000 candles without timeout [33m 559[2mms[22m[39m
     [33m[2mâœ“[22m[39m handles 10.000 candles without timeout [33m 498[2mms[22m[39m
     [33m[2mâœ“[22m[39m handles 25.000 candles without timeout [33m 1084[2mms[22m[39m
     [33m[2mâœ“[22m[39m handles 50.000 candles without timeout [33m 1394[2mms[22m[39m
     [33m[2mâœ“[22m[39m concurrent calculations produce correct independent results [33m 357[2mms[22m[39m
     [33m[2mâœ“[22m[39m no shared-state corruption between sequential runs [33m 326[2mms[22m[39m
 [32mâœ“[39m src/routes/api/sync/positions-history/positions_history_security.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 101[2mms[22m[39m
 [32mâœ“[39m src/tests/security/log_stream_auth.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 112[2mms[22m[39m
 [32mâœ“[39m tests/verify_tpsl_validation.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 136[2mms[22m[39m
[90mstdout[2m | src/benchmarks/marketWatcher_backfill.test.ts[2m > [22m[2mMarketWatcher Backfill Performance[2m > [22m[2mmeasures sequential backfill
[22m[39mExecution Time: 1459ms

 [32mâœ“[39m src/benchmarks/marketWatcher_backfill.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 1479[2mms[22m[39m
     [33m[2mâœ“[22m[39m measures sequential backfill [33m 1473[2mms[22m[39m
[90mstderr[2m | src/routes/api/sentiment/sentiment.test.ts[2m > [22m[2mPOST /api/sentiment error handling[2m > [22m[2mshould return 500 and error message when a standard Error is thrown
[22m[39mSentiment API Error: Error: Test Error
    at default.<instance_members_initializer> [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/sentiment/sentiment.test.ts:30:55[90m)[39m
    at new default [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/sentiment/sentiment.test.ts:27:18[90m)[39m
    at Module.POST [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/sentiment/+server.ts:37:28[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:104:5)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/sentiment/sentiment.test.ts:57:26
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20

 [32mâœ“[39m src/routes/api/sentiment/sentiment.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 133[2mms[22m[39m
 [32mâœ“[39m src/routes/api/sync/sync_security.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 109[2mms[22m[39m
 [32mâœ“[39m src/routes/api/sync/orders/security.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 171[2mms[22m[39m
 [32mâœ“[39m src/tests/security/cmc_proxy.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 144[2mms[22m[39m
 [32mâœ“[39m tests/auth_fail_closed.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 86[2mms[22m[39m
[90mstdout[2m | src/routes/api/klines/klines.test.ts[2m > [22m[2mGET /api/klines[2m > [22m[2mshould return klines with string properties from Bitunix
[22m[39m[Bitunix API] BTCUSDT:1d requested 50 with end undefined. Got 2. FirstTS: 1600000000, LastTS: 1600000060

 [32mâœ“[39m src/lib/server/auth.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 160[2mms[22m[39m
[90mstdout[2m | src/routes/api/klines/klines.test.ts[2m > [22m[2mGET /api/klines[2m > [22m[2mshould handle numeric inputs from Bitunix correctly
[22m[39m[Bitunix API] BTCUSDT:1d requested 50 with end undefined. Got 1. FirstTS: 1600000000, LastTS: 1600000000

[90mstdout[2m | src/routes/api/klines/klines.test.ts[2m > [22m[2mGET /api/klines[2m > [22m[2mshould preserve small numbers without scientific notation if string provided
[22m[39m[Bitunix API] PEPEUSDT:1d requested 50 with end undefined. Got 1. FirstTS: 1600000000, LastTS: 1600000000

 [32mâœ“[39m src/routes/api/klines/klines.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 210[2mms[22m[39m
[90mstderr[2m | src/services/tradeService_safety.test.ts
[22m[39mFailed to load trade state TypeError: localStorage.getItem is not a function
    at TradeManager.load [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/trade.svelte.ts:222:35[90m)[39m
    at new TradeManager [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/trade.svelte.ts:199:12[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/trade.svelte.ts:506:14
[90m    at processTicksAndRejections (node:internal/process/task_queues:104:5)[39m
    at VitestModuleEvaluator._runInlinedModule [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/module-evaluator.js:196:4[90m)[39m
    at VitestModuleRunner.directRequest [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvite[24m/dist/node/module-runner.js:1146:59[90m)[39m
    at VitestModuleRunner.cachedRequest [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvite[24m/dist/node/module-runner.js:1053:73[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/omsService.ts:25:1
    at VitestModuleEvaluator._runInlinedModule [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/module-evaluator.js:196:4[90m)[39m
    at VitestModuleRunner.directRequest [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvite[24m/dist/node/module-runner.js:1146:59[90m)[39m

(node:244791) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
 [32mâœ“[39m tests/unit/timeUtils.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 129[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_safety.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 123[2mms[22m[39m
[90mstderr[2m | src/routes/api/external/news/news_service_memory.test.ts[2m > [22m[2mNews Service Cache Memory[2m > [22m[2mshould limit cache size to 50 items (optimization)
[22m[39m[NewsProxy] NewsAPI Schema Validation Warning: ZodError: [
  {
    "expected": "string",
    "code": "invalid_type",
    "path": [
      "status"
    ],
    "message": "Invalid input: expected string, received undefined"
  }
]
    at new ZodError [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mzod[24m/v4/core/core.js:39:39[90m)[39m
    at Module.<anonymous> [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mzod[24m/v4/core/parse.js:40:20[90m)[39m
    at _.inst.safeParse [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mzod[24m/v4/classic/schemas.js:40:46[90m)[39m
    at executeRequest [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/external/news/+server.ts:148:50[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:104:5)[39m
    at POST [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/external/news/+server.ts:165:20[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/routes/api/external/news/news_service_memory.test.ts:59:9
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | src/routes/api/external/news/news_service_memory.test.ts[2m > [22m[2mNews Service Cache Memory[2m > [22m[2mshould limit cache size to 50 items (optimization)
[22m[39m[NewsProxy] Error processing request for undefined: Upstream response failed schema validation

 [32mâœ“[39m src/routes/api/external/news/news_service_memory.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 124[2mms[22m[39m
 [32mâœ“[39m src/routes/api/external/news/news_security.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 148[2mms[22m[39m
 [32mâœ“[39m src/utils/mfi_correctness.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 143[2mms[22m[39m
 [32mâœ“[39m src/routes/api/account/account.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 133[2mms[22m[39m
 [32mâœ“[39m src/routes/api/stream-logs/server.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 127[2mms[22m[39m
 [32mâœ“[39m src/lib/calculators/rolling_stats.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 75[2mms[22m[39m
 [32mâœ“[39m src/services/technicalsService.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 199[2mms[22m[39m
 [32mâœ“[39m src/routes/api/chat-v2/server.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 354[2mms[22m[39m
 [32mâœ“[39m src/tests/security/headers.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 188[2mms[22m[39m
[90mstdout[2m | src/utils/tests/precision_loss.test.ts[2m > [22m[2mCritical: JSON Precision Loss & Hardening[2m > [22m[2mverifies that safeJsonParse preserves large integers as strings
[22m[39m[Safe Parse] Raw ID:    1234567890123456789
[Safe Parse] Parsed ID: 1234567890123456789 (Type: string)

 [32mâœ“[39m src/utils/tests/precision_loss.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32mâœ“[39m src/services/apiService_rateLimit.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 129[2mms[22m[39m
 [32mâœ“[39m src/workers/technicals.worker.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 169[2mms[22m[39m
[90mstderr[2m | src/services/bitunixWs.test.ts[2m > [22m[2mBitunixWS Fast Path Fallback[2m > [22m[2mshould FALLBACK to standard validation if Fast Path throws (using Ticker channel)
[22m[39m[BitunixWS] FastPath error (ticker): Error: Fast Path Crash
    at Object.<anonymous> [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/bitunixWs.test.ts:133:19[90m)[39m
    at Object.Mock [as normalizeTicker] [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/spy[24m/dist/index.js:285:34[90m)[39m
    at BitunixWebSocketService.handleMessage [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/bitunixWs.ts:945:51[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/services/bitunixWs.test.ts:145:19
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

 [32mâœ“[39m src/services/bitunixWs.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 86[2mms[22m[39m
 [32mâœ“[39m src/services/workerPool.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 118[2mms[22m[39m
 [32mâœ“[39m src/services/omsService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 122[2mms[22m[39m
[90mstdout[2m | src/utils/storageUtils.test.ts[2m > [22m[2mstorageUtils[2m > [22m[2mshould correct drift via async verification on startup
[22m[39m[StorageUtils] Correcting usage cache drift: 4 -> 8

 [32mâœ“[39m src/utils/storageUtils.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 92[2mms[22m[39m
 [32mâœ“[39m src/utils/inputUtils.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 138[2mms[22m[39m
 [32mâœ“[39m src/lib/server/sanitizer.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 138[2mms[22m[39m
 [32mâœ“[39m src/lib/calculator_charts.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 65[2mms[22m[39m
 [32mâœ“[39m src/services/chartPatterns.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 100[2mms[22m[39m
 [32mâœ“[39m src/lib/server/logger.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 38[2mms[22m[39m
 [32mâœ“[39m src/utils/errorUtils.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m src/utils/indicators.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 129[2mms[22m[39m
 [32mâœ“[39m src/tests/hardening/float_safety.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32mâœ“[39m src/utils/technicalsCalculator.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m src/utils/retryPolicy.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 86[2mms[22m[39m
 [32mâœ“[39m src/services/apiService_recursion.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mâœ“[39m src/tests/decimal-enforcement.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 28[2mms[22m[39m
 [32mâœ“[39m src/utils/utils.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 28[2mms[22m[39m
 [32mâœ“[39m src/config/rssPresets.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32mâœ“[39m src/stores/chat.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 21[2mms[22m[39m
[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould initialize correctly
[22m[39m[WebGPU] Initialized pipelines

[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould handle Float32Array params
[22m[39m[WebGPU] Initialized pipelines

[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould handle ArrayBuffer params (mixed types)
[22m[39m[WebGPU] Initialized pipelines

[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould handle Uint32Array params
[22m[39m[WebGPU] Initialized pipelines

[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould handle number[] params (default to Uint32Array)
[22m[39m[WebGPU] Initialized pipelines

[90mstdout[2m | tests/unit/webGpuCalculator.test.ts[2m > [22m[2mWebGpuCalculator[2m > [22m[2mshould handle multiple outputs
[22m[39m[WebGPU] Initialized pipelines

 [32mâœ“[39m tests/unit/webGpuCalculator.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 46[2mms[22m[39m
 [32mâœ“[39m src/stores/market.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 59[2mms[22m[39m
 [32mâœ“[39m tests/repro_calculator.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 83[2mms[22m[39m
 [32mâœ“[39m src/lib/calculators/stats.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32mâœ“[39m tests/unit/logger_security.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_race.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 39[2mms[22m[39m
[90mstdout[2m | src/tests/hardening/server_precision_repro.test.ts[2m > [22m[2mServer-Side Precision Loss Reproduction[2m > [22m[2mshould demonstrate that native JSON.parse corrupts 19-digit integers
[22m[39m[Repro] Native Parse: 1234567890123456789 -> 1234567890123456800

[90mstdout[2m | src/tests/hardening/server_precision_repro.test.ts[2m > [22m[2mServer-Side Precision Loss Reproduction[2m > [22m[2mshould demonstrate that safeJsonParse preserves 19-digit integers as strings
[22m[39m[Repro] Safe Parse:   1234567890123456789 -> 1234567890123456789

 [32mâœ“[39m src/tests/hardening/server_precision_repro.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mâœ“[39m src/services/logger.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 52[2mms[22m[39m
 [32mâœ“[39m src/services/newsService_limit.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 47[2mms[22m[39m
 [32mâœ“[39m tests/unit/circularBuffer.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32mâœ“[39m src/lib/calculators/new_charts.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 54[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_flashClose_hardening.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 34[2mms[22m[39m
 [32mâœ“[39m src/utils/statefulTechnicalsCalculator.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 48[2mms[22m[39m
 [32mâœ“[39m src/services/marketAnalyst.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 27[2mms[22m[39m
 [32mâœ“[39m src/services/serializationService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 20[2mms[22m[39m
[90mstderr[2m | src/stores/account.test.ts[2m > [22m[2mAccountManager[2m > [22m[2mshould trigger sync callback on partial update for unknown position (Race Condition Fix)
[22m[39mBitunix WS: Ignored position update due to missing side. Requesting full sync. {
  positionId: [32m'999'[39m,
  symbol: [32m'ETHUSDT'[39m,
  qty: [32m'10.0'[39m,
  unrealizedPNL: [32m'50'[39m
}

 [32mâœ“[39m src/stores/account.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m src/utils/bufferPool.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 52[2mms[22m[39m
 [32mâœ“[39m src/utils/divergenceScanner.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mâœ“[39m src/lib/calculator.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 45[2mms[22m[39m
 [32mâœ“[39m src/services/bitunixWs_fastpath.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_hardening.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 30[2mms[22m[39m
 [32mâœ“[39m src/utils/slidingWindow.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32mâœ“[39m src/tests/provider-switch.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32mâœ“[39m src/lib/calculators/getQualityData.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m src/utils/networkMonitor.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 105[2mms[22m[39m
 [32mâœ“[39m src/tests/tradeService_race.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m src/utils/technicalsPresenter.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mâœ“[39m src/lib/calculator_duration.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 30[2mms[22m[39m
 [32mâœ“[39m src/tests/flash-close.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32mâœ“[39m src/utils/safeJson_hardening.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m src/services/patternDetection.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m src/utils/utils_timestamp.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 15[2mms[22m[39m
[90mstdout[2m | src/utils/indicators_precision.test.ts[2m > [22m[2mindicators precision[2m > [22m[2mbb (Bollinger Bands)[2m > [22m[2mshould handle high-value low-volatility assets without catastrophic cancellation
[22m[39mCalculated StdDev: [33m0.049999999995634425[39m

 [32mâœ“[39m src/utils/indicators_precision.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mâœ“[39m src/types/apiSchemas.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_flashClose.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 24[2mms[22m[39m
 [32mâœ“[39m src/services/julesService.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mâœ“[39m src/tests/safeJson.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m src/services/apiService.repro.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 25[2mms[22m[39m
 [32mâœ“[39m src/tests/flash_close_race_repro.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mâœ“[39m src/services/csvService_hardening.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m tests/unit/fastConversion.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32mâœ“[39m src/utils/incremental_indicators.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32mâœ“[39m src/utils/fastConversion.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mâœ“[39m src/utils/safeJson_integers.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m src/stores/analysisStore.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32mâœ“[39m src/services/marketWatcher.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32mâœ“[39m src/services/mappers.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32mâœ“[39m src/services/bitunixWs_leak.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32mâœ“[39m src/services/cloudService.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m src/utils/safeJson.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mâœ“[39m src/services/mdaService.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mâœ“[39m src/utils/timeUtils.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 13[2mms[22m[39m
[90mstdout[2m | src/services/reproduction_ghost_order.test.ts[2m > [22m[2mGhost Order Reproduction[2m > [22m[2mshould cleanup ghost orders
[22m[39mGhost Order Successfully Removed

 [32mâœ“[39m src/services/reproduction_ghost_order.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 23[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService_serialization.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mâœ“[39m src/utils/stochRsi_correctness.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mâœ“[39m src/tests/unit/indicators_mfi.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mâœ“[39m src/services/smc/smcService.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mâœ“[39m src/services/bitunixWs.leak.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 17[2mms[22m[39m
 [32mâœ“[39m src/services/marketWatcher_fillGaps.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32mâœ“[39m src/tests/unit/indicators_cci.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 25[2mms[22m[39m
 [32mâœ“[39m src/services/tradeService.repro.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 10[2mms[22m[39m
 [32mâœ“[39m tests/integration/wasm_parity.test.ts [2m([22m[2m2 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[32m 11[2mms[22m[39m
 [32mâœ“[39m src/tests/unit/indicators_ao.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mâœ“[39m src/utils/safeJson_precision.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 13[2mms[22m[39m
[90mstderr[2m | src/stores/tradeStore.test.ts
[22m[39mFailed to load trade state TypeError: localStorage.getItem is not a function
    at TradeManager.load [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/trade.svelte.ts:222:35[90m)[39m
    at new TradeManager [90m(/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/trade.svelte.ts:199:12[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/trade.svelte.ts:506:14
[90m    at processTicksAndRejections (node:internal/process/task_queues:104:5)[39m
    at VitestModuleEvaluator._runInlinedModule [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/module-evaluator.js:196:4[90m)[39m
    at VitestModuleRunner.directRequest [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvite[24m/dist/node/module-runner.js:1146:59[90m)[39m
    at VitestModuleRunner.cachedRequest [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvite[24m/dist/node/module-runner.js:1053:73[90m)[39m
    at [90m/home/pat/Dokumente/GitHub/cachy-app/[39msrc/stores/tradeStore.test.ts:20:1
    at VitestModuleEvaluator._runInlinedModule [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvitest[24m/dist/module-evaluator.js:196:4[90m)[39m
    at VitestModuleRunner.directRequest [90m(file:///home/pat/Dokumente/GitHub/cachy-app/[39mnode_modules/[4mvite[24m/dist/node/module-runner.js:1146:59[90m)[39m

(node:245733) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
 [32mâœ“[39m src/stores/tradeStore.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [2m[90mâ†“[39m[22m src/services/cryptoService.test.ts [2m([22m[2m3 tests[22m[2m | [22m[33m3 skipped[39m[2m)[22m
 [32mâœ“[39m src/tests/precision.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mâœ“[39m src/services/bitunixWs_hardening.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [2m[90mâ†“[39m[22m src/tests/performance/market_watcher_concurrency.test.ts [2m([22m[2m1 test[22m[2m | [22m[33m1 skipped[39m[2m)[22m

[31mâ¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Suites 17 [49m[22m[31mâ¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m tests/tradeflow.spec.ts[2m [ tests/tradeflow.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/tradeflow.spec.ts:[2m20:6[22m[39m
    [90m 18| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m 19| [39m
    [90m 20| [39mtest[33m.[39m[34mdescribe[39m([32m'TradeFlow Visual Verification'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 21| [39m    test[33m.[39m[34mbeforeEach[39m([35masync[39m ({ page }) [33m=>[39m {
    [90m 22| [39m        [35mawait[39m page[33m.[39m[34mgoto[39m([32m'/'[39m)[33m;[39m 

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/17]â¯[22m[39m

[41m[1m FAIL [22m[49m src/stores/marketStore.test.ts[2m [ src/stores/marketStore.test.ts ][22m
[41m[1m FAIL [22m[49m src/stores/settings.security.test.ts[2m [ src/stores/settings.security.test.ts ][22m
[41m[1m FAIL [22m[49m src/tests/security/storage_hardening.test.ts[2m [ src/tests/security/storage_hardening.test.ts ][22m
[31m[1mTypeError[22m: localStorage.getItem is not a function[39m
[36m [2mâ¯[22m new UiManager src/stores/ui.svelte.ts:[2m111:22[22m[39m
    [90m109| [39m    [35mif[39m (browser) {
    [90m110| [39m      [35mthis[39m[33m.[39mcurrentTheme [33m=[39m
    [90m111| [39m        localStorage.getItem(CONSTANTS.LOCAL_STORAGE_THEME_KEY) || "daâ€¦
    [90m   | [39m                     [31m^[39m
    [90m112| [39m    }
    [90m113| [39m  }
[90m [2mâ¯[22m src/stores/ui.svelte.ts:[2m449:14[22m[39m
[90m [2mâ¯[22m src/utils/storageHelper.ts:[2m10:1[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/17]â¯[22m[39m

[41m[1m FAIL [22m[49m src/services/app.test.ts[2m [ src/services/app.test.ts ][22m
[41m[1m FAIL [22m[49m src/services/hotkeyService.test.ts[2m [ src/services/hotkeyService.test.ts ][22m
[41m[1m FAIL [22m[49m src/tests/performance/startup_benchmark.test.ts[2m [ src/tests/performance/startup_benchmark.test.ts ][22m
[31m[1mTypeError[22m: localStorage.getItem is not a function[39m
[36m [2mâ¯[22m src/locales/i18n.ts:[2m192:54[22m[39m
    [90m190| [39m
    [90m191| [39m[35mconst[39m storedLocale [33m=[39m
    [90m192| [39m  typeof localStorage !== "undefined" ? localStorage.getItem("locale")â€¦
    [90m   | [39m                                                     [31m^[39m
    [90m193| [39m
    [90m194| [39m[35mlet[39m initialLocaleValue[33m:[39m string[33m;[39m
[90m [2mâ¯[22m src/services/calculatorService.ts:[2m27:1[22m[39m
[90m [2mâ¯[22m src/services/app.ts:[2m20:1[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/17]â¯[22m[39m

[41m[1m FAIL [22m[49m src/services/backupService.test.ts[2m [ src/services/backupService.test.ts ][22m
[31m[1mReferenceError[22m: window is not defined[39m
[36m [2mâ¯[22m src/services/backupService.test.ts:[2m46:23[22m[39m
    [90m 44| [39m})()[33m;[39m
    [90m 45| [39m
    [90m 46| [39m[33mObject[39m[33m.[39m[34mdefineProperty[39m(window[33m,[39m [32m"localStorage"[39m[33m,[39m {
    [90m   | [39m                      [31m^[39m
    [90m 47| [39m  value[33m:[39m localStorageMock[33m,[39m
    [90m 48| [39m})[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/17]â¯[22m[39m

[41m[1m FAIL [22m[49m src/services/csvService.test.ts[2m [ src/services/csvService.test.ts ][22m
[31m[1mTypeError[22m: localStorage.getItem is not a function[39m
[36m [2mâ¯[22m src/locales/i18n.ts:[2m192:54[22m[39m
    [90m190| [39m
    [90m191| [39m[35mconst[39m storedLocale [33m=[39m
    [90m192| [39m  typeof localStorage !== "undefined" ? localStorage.getItem("locale")â€¦
    [90m   | [39m                                                     [31m^[39m
    [90m193| [39m
    [90m194| [39m[35mlet[39m initialLocaleValue[33m:[39m string[33m;[39m
[90m [2mâ¯[22m src/services/csvService.ts:[2m20:1[22m[39m
[90m [2mâ¯[22m src/services/csvService.test.ts:[2m19:1[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/17]â¯[22m[39m

[41m[1m FAIL [22m[49m src/services/marketWatcher_hardening.test.ts[2m [ src/services/marketWatcher_hardening.test.ts ][22m
[31m[1mReferenceError[22m: window is not defined[39m
[36m [2mâ¯[22m new StorageService src/services/storageService.ts:[2m47:39[22m[39m
    [90m 45| [39m
    [90m 46| [39m    [34mconstructor[39m() {
    [90m 47| [39m        [35mif[39m (browser [33m&&[39m [32m"indexedDB"[39m [35min[39m window) {
    [90m   | [39m                                      [31m^[39m
    [90m 48| [39m            [35mthis[39m[33m.[39misSupported [33m=[39m [35mtrue[39m[33m;[39m
    [90m 49| [39m            [35mthis[39m[33m.[39m[34minitDB[39m()[33m;[39m
[90m [2mâ¯[22m src/services/storageService.ts:[2m238:31[22m[39m
[90m [2mâ¯[22m src/services/marketWatcher.ts:[2m27:1[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/17]â¯[22m[39m

[41m[1m FAIL [22m[49m src/services/marketWatcher_perf.test.ts[2m [ src/services/marketWatcher_perf.test.ts ][22m
[31m[1mTypeError[22m: localStorage.getItem is not a function[39m
[36m [2mâ¯[22m IndicatorManager.load src/stores/indicator.svelte.ts:[2m258:33[22m[39m
    [90m256| [39m
    [90m257| [39m  [35mprivate[39m [34mload[39m() {
    [90m258| [39m    [35mconst[39m stored [33m=[39m localStorage[33m.[39m[34mgetItem[39m([33mSTORE_KEY[39m)[33m;[39m
    [90m   | [39m                                [31m^[39m
    [90m259| [39m    [35mif[39m ([33m![39mstored) [35mreturn[39m[33m;[39m
    [90m260| [39m
[90m [2mâ¯[22m new IndicatorManager src/stores/indicator.svelte.ts:[2m235:12[22m[39m
[90m [2mâ¯[22m src/stores/indicator.svelte.ts:[2m433:14[22m[39m
[90m [2mâ¯[22m src/services/activeTechnicalsManager.svelte.ts:[2m6:31[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[7/17]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/benchmarks/syncService_perf.test.ts[2m [ tests/benchmarks/syncService_perf.test.ts ][22m
[31m[1mTypeError[22m: localStorage.getItem is not a function[39m
[36m [2mâ¯[22m src/locales/i18n.ts:[2m192:54[22m[39m
    [90m190| [39m
    [90m191| [39m[35mconst[39m storedLocale [33m=[39m
    [90m192| [39m  typeof localStorage !== "undefined" ? localStorage.getItem("locale")â€¦
    [90m   | [39m                                                     [31m^[39m
    [90m193| [39m
    [90m194| [39m[35mlet[39m initialLocaleValue[33m:[39m string[33m;[39m
[90m [2mâ¯[22m src/services/syncService.ts:[2m27:1[22m[39m
[90m [2mâ¯[22m tests/benchmarks/syncService_perf.test.ts:[2m2:1[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[8/17]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/e2e/offline-banner.spec.ts[2m [ tests/e2e/offline-banner.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/e2e/offline-banner.spec.ts:[2m21:6[22m[39m
    [90m 19| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m 20| [39m
    [90m 21| [39mtest[33m.[39m[34mdescribe[39m([32m'Offline Banner UX'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 22| [39m    test('should show offline banner when disconnected', async ({ pageâ€¦
    [90m 23| [39m        [35mawait[39m page[33m.[39m[34mgoto[39m([32m'/'[39m)[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[9/17]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/e2e/wasm_features.spec.ts[2m [ tests/e2e/wasm_features.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/e2e/wasm_features.spec.ts:[2m20:6[22m[39m
    [90m 18| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m 19| [39m
    [90m 20| [39mtest[33m.[39m[34mdescribe[39m([32m'WASM & Engine Features'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 21| [39m
    [90m 22| [39m  [34mtest[39m([32m'should load WASM calculator correctly'[39m[33m,[39m [35masync[39m ({ page }) [33m=>[39m {

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[10/17]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/e2e/hardening/smoke_test.spec.ts[2m [ tests/e2e/hardening/smoke_test.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/e2e/hardening/smoke_test.spec.ts:[2m20:6[22m[39m
    [90m 18| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m 19| [39m
    [90m 20| [39mtest[33m.[39m[34mdescribe[39m([32m'Hardening Smoke Test'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 21| [39m  test('should load the application without crashing', async ({ page }â€¦
    [90m 22| [39m    [35mconst[39m consoleErrors[33m:[39m string[] [33m=[39m [][33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[11/17]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/e2e/hardening/trade_flow.spec.ts[2m [ tests/e2e/hardening/trade_flow.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/e2e/hardening/trade_flow.spec.ts:[2m20:6[22m[39m
    [90m 18| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m 19| [39m
    [90m 20| [39mtest[33m.[39m[34mdescribe[39m([32m'Trade Flow (Happy Path)'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 21| [39m  [90m// Mock API responses[39m
    [90m 22| [39m  test[33m.[39m[34mbeforeEach[39m([35masync[39m ({ page }) [33m=>[39m {

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[12/17]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/e2e/hardening/wasm-resilience.test.ts[2m [ tests/e2e/hardening/wasm-resilience.test.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2mâ¯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m75:13[22m[39m
[90m [2mâ¯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m115:24[22m[39m
[90m [2mâ¯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m282:12[22m[39m
[36m [2mâ¯[22m tests/e2e/hardening/wasm-resilience.test.ts:[2m24:6[22m[39m
    [90m 22| [39m[35mconst[39m [33mWASM_PATH[39m [33m=[39m [32m'**/technicals_wasm_bg.wasm'[39m[33m;[39m
    [90m 23| [39m
    [90m 24| [39mtest[33m.[39m[34mdescribe[39m([32m'WASM Resilience & Hardening'[39m[33m,[39m () [33m=>[39m {
    [90m   | [39m     [31m^[39m
    [90m 25| [39m
    [90m 26| [39m    test('should retry loading WASM module upon network failure', asynâ€¦

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[13/17]â¯[22m[39m


[2m Test Files [22m [1m[31m17 failed[39m[22m[2m | [22m[1m[32m120 passed[39m[22m[2m | [22m[33m2 skipped[39m[90m (139)[39m
[2m      Tests [22m [1m[32m574 passed[39m[22m[2m | [22m[33m5 skipped[39m[90m (579)[39m
[2m   Start at [22m 16:28:07
[2m   Duration [22m 39.23s[2m (transform 42.00s, setup 7.93s, import 70.30s, tests 22.53s, environment 8.62s)[22m

